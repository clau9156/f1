!function(t){function e(e){for(var n,a,r=e[0],l=e[1],c=e[2],u=0,h=[];u<r.length;u++)a=r[u],s[a]&&h.push(s[a][0]),s[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(d&&d(e);h.length;)h.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var l=i[r];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},s={36:0,1:0},o=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([153,0,2]),i()}([,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hitPageView=e.initializeContentWidget=e.initSidebarWidgets=e.currentPage=e.fn=e.buttonsFn=e.formsConfig=e.cmpButtonsUtils=e.cmpConfirmAlert=e.cmpTrayAlert=e.$=void 0,i(51);var n=R(i(0)),s=R(i(7)),o=R(i(52));i(53),i(54),i(25),i(26),i(27);var a=i(28);i(10),i(55),i(29);var r=i(30),l=i(6),c=i(11),d=i(12),u=i(19),h=i(31),f=i(22),p=i(33),m=i(4),g=i(34),v=i(13),y=i(35);i(57);var b=R(i(23)),w=R(i(36)),_=R(i(15)),$=R(i(5)),k=R(i(37)),C=R(i(38)),T=R(i(39)),S=i(42),x=i(9),O=R(i(43)),P=R(i(44)),I=i(3),A=i(17),E=R(i(14));i(45);var M=R(i(21)),D=R(i(8)),j=R(i(46));function R(t){return t&&t.__esModule?t:{default:t}}e.$=n.default,window.$=n.default,window.jQuery=n.default,e.cmpTrayAlert=c.cmpTrayAlert,e.cmpConfirmAlert=d.cmpConfirmAlert,window.cmpTrayAlert=c.cmpTrayAlert,window.cmpConfirmAlert=d.cmpConfirmAlert,window.cmpDialog=u.cmpDialog,e.cmpButtonsUtils=v.cmpButtonsUtils,e.formsConfig=y.formsConfig,(0,S.sendUserGTM)(),(0,x.initDateFields)(),window.msSilentScrollIssuers=0;var F={mainMenuSwitcher:function(t,e){var i=h.msHeader.$mainMenuPrime||[];if(i.length){var s=h.msHeader.$mainMenu||[],o=0;s.length&&(t.toggle?(i.removeClass("visible"),s.addClass("visible"),h.msHeader.mainMenuReconstruction(),o=0):(s.removeClass("visible"),i.addClass("visible"),h.msHeader.mainMenuPrimeReconstruction(),o=1),t.storage&&n.default.cookie(t.storage,o,{expires:365,path:"/"}),v.cmpButtonsUtils.buttons.toggleBox.click.call(this,t,e,"mainMenuSwitcher"));var a=(0,n.default)(document.body).data("pageType");!a||"home"!=a&&"home-category"!=a||window.goToUrl()}else{var r=(0,n.default)(e).attr("href");r&&(window.location.href=r)}},mainMenuToggle:function(t,e){v.cmpButtonsUtils.buttons.toggleBox.click.call(this,t,e,"mainMenuToggle"),I.fn.toggleMenuDrawerWithAnimation(t.toggle)},mainMenuToggleClose:function(t,e){I.fn.toggleMenuDrawerWithAnimation(!1)}},L=n.default.extend($.default,F,k.default);e.buttonsFn=L,window.adSkins=O.default.adSkins.bind(O.default),window.adToaster=P.default.adToaster.bind(P.default),e.fn=I.fn,window.fn=I.fn;var U=(0,n.default)(window),N=(0,n.default)(document.body),B=I.fn.isIpadPro(s.default),W=!!("ontouchstart"in window),q=(window.isDesktop=(window.innerWidth||document.documentElement.clientWidth)>=1024&&"desktop"==s.default.type||B)?"no-touch":W?"touch":"no-touch";B&&(q+=" s-touch"),document.documentElement.className=q,window.preventScrollFlag=!1;var z=".ms-grid-vert .ms-item_title, .ms-trending-content .ms-item_title, .ms-item-layout-column .ms-item_title, .ms-item_subheader";function G(t,e){I.fn.banners(e),t&&t.userResetData&&l.User.resetUserDataStorage(),l.User.isUserAuthorized()?l.User.getUser(function(t){var i="Object"===Object.prototype.toString.call(t).slice(8,-1);l.User.renderUserUI(),X(e),"gtmDataLayer"in window&&i&&gtmDataLayer.push({userId:t.id,email:t.email,signup_date:t.signup_date})}):(l.User.resetUserDataStorage(),X(e)),e.find(".ms-side-widget").each(function(t,e){K((0,n.default)(e))}),K((0,n.default)(".ms-item-widget--race-center")),V(e),new _.default({selector:e.find(".ms-share-container"),data:msConfigVars.shares,onAfterShare:I.fn.afterShare.bind(I.fn)}),t&&t.noImgLazyLoad||I.fn.initImgLazyLoad(),Y(e,t&&t.dotdotdotSelectors),N.on("ms-footer-messages",I.fn.pageMessages.bind(this,window.msFooterMessages,".ms-footer-messages","ms-footer-message","footerMessageAccept")),setTimeout(function(t){N.trigger("ms-footer-messages")},500);var i=[],s=[],o=[],a=[];o.push((0,n.default)("html").attr("lang"));for(var r="",c=0;c<navigator.languages.length&&(r=navigator.languages[c].split("-")[0],!o.includes(r)&&window.msEditions&&window.msEditions[r]&&("en"===r?(o.push(r),a.push(window.msEditions[r])):(o.push(r),s.push(window.msEditions[r]))),!(s.length>=2));c++);s.length||(s=a),i.push({message:translate("available_editions"),name:"edition_notification"}),N.on("ms-footer-notifications",I.fn.pageNotifications.bind(this,i,".ms-footer-editions-messages","ms-footer-notifications","footerNotificationsClose",s)),setTimeout(function(t){N.trigger("ms-footer-notifications")},500),t&&(t.constructor,Object)}function H(t,e){I.fn.banners(e),X(e),V(e),new _.default({selector:e.find(".ms-share-container"),data:msConfigVars.shares,onAfterShare:I.fn.afterShare.bind(I.fn)}),t&&t.noImgLazyLoad||I.fn.initImgLazyLoad(),Y(e,t&&t.dotdotdotSelectors),e.filter(".ms-side-widget").each(function(t,e){K((0,n.default)(e))}),K((0,n.default)(".ms-item-widget--race-center")),(0,E.default)(e.find(".ms-schedule-item-countdown")),t&&(t.constructor,Object)}function X(t){b.default.init({selector:t,url:msConfigVars.viewsServiceStatUrl,minCount:1})}function V(t){w.default.init({selector:t,itemSelector:".ms-comments-count",valueSelector:".ms-comments-count_value",config:msConfigVars.comments})}function Y(t,e){if(void 0===document.body.style.webkitLineClamp||t.data("edtn-rtl")){var i=z+(e?", "+e:"");t.find(i).dotdotdot({height:"watch",truncate:-1!=n.default.inArray(N.data("edtn"),["cn","jp"])?"letter":"word"})}}function K(t){var e=t.data("widget-type");e&&!t.data("init")&&(t.data("init",!1),(0,T.default)(e,t))}e.currentPage=A.currentPage,(0,n.default)(function(){n.default.cookie("ms_touch",q,{path:"/"}),(0,r.scaleFix)();n.default.smartbanner({title:"uk"!=N.data("edtn")?"Motorsport.com":"Autosport.com",author:"uk"!=N.data("edtn")?"Motorsport.com, Inc":"Autosport.com, Inc",price:!1,appStoreLanguage:"us",inAppStore:"",inGooglePlay:"",icon:"uk"!=N.data("edtn")?"/design/images/webapp/i196.png":"/design/images/webapp/Autosport/i196.png",iconGloss:null,button:i18n.install_app,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:!1,layer:!0});window.msInitPushNotifications=M.default;var t=(0,n.default)(".ms-sticky-ad");if(t.length){var e=(0,n.default)(".ms-page-content");t.each(function(t,i){if((0,n.default)(i).hasClass("ms-sticky-ad--in-page"))new D.default({content:e,sidebar:i,class:"ms-sticky-ad",reverse:!0,context:null,breakpoint:1025});else new j.default({content:e,sidebar:i,class:"ms-sticky-ad",context:null,breakpoint:1025})})}(0,o.default)({}),C.default.init({context:N});var i=(0,n.default)(document.body);c.cmpTrayAlert.init({insert:1}),d.cmpConfirmAlert.init({insert:1});var s=(0,n.default)(".ms-admin-info-layout");if(s.length){var l=s.data("version"),v=s.data("version-title");(l||v)&&c.cmpTrayAlert.show("Preview version: <b>"+l+" - "+v+"</b>","error",1e4)}u.cmpDialog.init({buttonOk:translate("button_ok","Ok"),buttonCancel:translate("button_cancel","Cancel"),buttonClose:translate("button_close","Close")}),(0,E.default)(i.find(".ms-schedule-item-countdown")),m.cmpButtons.init({buttons:L,error:function(t,e,i,n,s){c.cmpTrayAlert.show(s.responseJSON&&s.responseJSON.constructor===Object&&s.responseJSON.message?s.responseJSON.message:"Bad response (JSON)","error",30)}}),g.cmpButtonsToggle.init({}),p.cmpBubbles.init({minWidth:640,error:function(t,e,i,n,s){c.cmpTrayAlert.show(s.responseJSON&&s.responseJSON.constructor===Object&&s.responseJSON.message?s.responseJSON.message:"Bad response (JSON)","error",30)}}),a.formValidateConfig.init({forms:y.formsConfig}),h.msHeader.init(),f.Piano.init();var b=void 0;"pageInit"in A.currentPage&&("function"==typeof window.Promise?G(b=A.currentPage.pageInit(i,i.data(),i.attr("id")),i):n.default.getScript("/design/src/js/polyfills/es6-promise.min.js",function(){window.ES6Promise.polyfill(),G(b=A.currentPage.pageInit(i,i.data(),i.attr("id")),i)})),document.scrollingElement.addEventListener("touchmove",function(t){window.preventScrollFlag&&t.preventDefault()},{passive:!1}),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],O.default.init();var w=null;U.on("resize",function(){clearTimeout(w),w=setTimeout(function(){I.fn.banners()},500)}).on("ms-new-content",function(t,e){H(b,e)}).on("ms-filter-new-content-updated",function(t,e){H(b,e)}).on("ms-url-changed ms-url-changed-virtual",function(t,e,i,n,s){if("[object Object]"===Object.prototype.toString.call(e)){var o=e;e=o.url,i=o.title,n=o.pure,s=o.preventGA}s||J(e,i,n||b&&b.gaTrackPure)}).on("ms-comment-authorised",I.fn.showLoginWindow.bind(I.fn))}),e.initSidebarWidgets=function(t){(t=t||N).find(".ms-side-widget--results").each(function(t,e){(0,T.default)("results",(0,n.default)(e))}),t.find(".ms-side-widget--standings").each(function(t,e){(0,T.default)("standings",(0,n.default)(e))});var e=t.find(".ms-side-widget--race-hub");e.each(function(t,e){(0,T.default)("raceHub",(0,n.default)(e))}),t.find(".ms-side-widget--testing"),e.each(function(t,e){(0,T.default)("testing",(0,n.default)(e))}),t.find(".ms-side-widget--preseason"),e.each(function(t,e){(0,T.default)("testing",(0,n.default)(e))})},e.initializeContentWidget=K,window.translate=I.fn.translate,window.goToUrl=I.fn.goToUrl;var J=e.hitPageView=function(t,e,i,n){var s=window.location;t=t||s.pathname+s.search+s.hash,i&&(t=(t=t.split("?")[0]).split("#")[0]),e=e||document.title,n=n||"VirtualPageview","gtmDataLayer"in window&&gtmDataLayer.push({event:n,virtualPageURL:t,virtualPageTitle:e})}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fn=void 0;var _adv=__webpack_require__(32),_jquery=__webpack_require__(0),_jquery2=_interopRequireDefault(_jquery),_throttleDebounce=__webpack_require__(2);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var fn=exports.fn={getScript:function(t,e,i){_jquery2.default.ajax({type:"GET",url:t,success:e,dataType:"script",cache:!1!==i})},banners:function(t){try{_adv.advFn.banners(t)}catch(t){"console"in window&&console.log("Banners init: "+t)}},connectThirdPartyServices:function(t){if(t.length)for(var e=0,i=t.length;e<i;e++)t[e][1]&&fn.getScript(t[e][0],t[e][2]||!1)},translate:function(t,e){return"i18n"in window&&void 0!==t&&i18n[t]?i18n[t]:void 0!==e?e:t||""},goToUrl:function(t){t?window.location.href=t:window.location.reload()},getJQSelector:function(t){var e=[];return t.length?(t.each(function(){var t=(0,_jquery2.default)(this),i="undefined"!==t.attr("id")&&t.attr("id")?"#"+t.attr("id"):!("undefined"===t.attr("class")||!t.attr("class"))&&"."+t.attr("class").split(" ").join(".");i&&e.push(i)}),e.length?e.join(","):""):""},highresDisplay:function(){if(window.matchMedia){var t=window.matchMedia("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");if(t&&t.matches)return!0}},trackSocial:function(t,e,i){gtmDataLayer.push({event:"socialInteraction",socialNetwork:t,socialAction:e,socialTarget:i})},afterShare:function(t,e){"gtmDataLayer"in window&&t.officialName&&e.shareUrl&&this.trackSocial(t.officialName,"share",e.shareUrl),t.collect&&t.name&&t.entityType&&t.entityId&&_jquery2.default.post({url:msConfigVars.viewsServiceShareUrl,data:JSON.stringify({network:t.name,id:t.entityId,type:t.entityType,url:e.shareUrl})})},showLoginWindow:function(){return"msnt"in window&&"function"==typeof msnt.openIframeWindow?(msnt.openIframeWindow(),!0):"msnt"in window&&"function"==typeof msnt.openLoginWindow&&(msnt.openLoginWindow(),_jquery2.default.cookie("redirect_url",window.location.href,{expires:1/24/60*10,path:"/"}),!0)},pushGtmDataFromElement:function(t){if((t=_jquery2.default.extend({selector:null},t)).selector){var e=(0,_jquery2.default)(t.selector);e.length&&e.each(function(){var t,e=(0,_jquery2.default)(this).data();e&&("event"in e&&(t=e.event,delete e.event),"gtmDataLayer"in window&&(gtmDataLayer.push(e),t&&gtmDataLayer.push({event:t})))})}},gtmInsertTagInScrollAppearedElement:function(t,e){if(e.tag&&e.entityId&&e.entityType&&"google_tag_manager"in window&&google_tag_manager[t]){var i=google_tag_manager[t].dataLayer,n=i.get("event"),s=i.get("gtm");if("gtm.elementVisibility"==n&&s&&s.element){var o=(0,_jquery2.default)(s.element);if(o.length){var a=o.data();e.entityId==a.entityId&&e.entityType==a.entityType&&("before"==e.insert?o.prepend(e.tag):o.append(e.tag))}}}},initImgLazyLoad:function(t){(0,_jquery2.default)(".lazy-img:not(.ready)",t).lazyload({failure_limit:Number.POSITIVE_INFINITY,event:"scrollstop",threshold:300,data_attribute:fn.highresDisplay()?"src2x":"src",load:function(){(0,_jquery2.default)(this).addClass("ready")}}),(0,_jquery2.default)(".ms-item-widget_items").on("scroll.lazy-load-vertical",(0,_throttleDebounce.throttle)(100,function(t){var e=(0,_jquery2.default)(t.target);e.find(".lazy-img:not(.ready)").length?$window.trigger("scroll"):e.off("scroll.lazy-load-vertical")}))},initEmbeds:function(t){t.find(".embed-item").each(function(t,e){var i=(0,_jquery2.default)(e),n=i.data("embedCode");if(n)try{fn.insertHTMLWithScripts(i[0],decodeURIComponent(n))}catch(t){fn.insertHTMLWithScripts(i[0],unescape(n))}})},sameHeight:function(t,e,i){var n=function(){var n=0;t.each(function(e,i){n+=(0,_jquery2.default)(i).outerHeight(e!==t.length-1)}),i&&i.each(function(t,e){n-=(0,_jquery2.default)(e).outerHeight(t!==i.length-1)}),e.css({height:n,"min-height":n,"max-height":n})};(0,_jquery2.default)(window).on("resize",n),"complete"==document.readyState?n():document.onreadystatechange=function(){"complete"===document.readyState&&n()}},initFlourishEmbeds:function initFlourishEmbeds($context){var $embeds=(0,_jquery2.default)(".flourish-embed",$context),url="https://public.flourish.studio/resources/embed.js";$embeds.length&&(window.flourishEmbed?window.flourishEmbed():((0,_jquery2.default)(document.body).append((0,_jquery2.default)("<script>").attr("src",url)),_jquery2.default.get(url,function(data,textStatus,jqxhr){window.flourishEmbed=function(){(0,_jquery2.default)(".flourish-embed").empty(),window.FlourishLoaded=!1;try{eval(data)}catch(t){}},window.flourishEmbed()})))},initWidgets:function(){"widgets"in window&&(widgets.pointsOfInterest&&widgets.pointsOfInterest(),widgets.compareImages&&widgets.compareImages())},insertHTMLWithScripts:function insertHTMLWithScripts(el,html){el=el||document.head;var htmlOrig=html,hd,match,attrs,srcMatch,typeMatch,s;el.innerHTML=html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");for(var scriptTagRe=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,typeRe=/\stype=([\'\"])(.*?)\1/i,srcRe=/\ssrc=([\'\"])(.*?)\1/i;match=scriptTagRe.exec(htmlOrig);)attrs=match[1],srcMatch=!!attrs&&attrs.match(srcRe),srcMatch&&srcMatch[2]?(s=document.createElement("script"),s.src=srcMatch[2],typeMatch=attrs.match(typeRe),typeMatch&&typeMatch[2]&&(s.type=typeMatch[2]),el.appendChild(s)):match[2]&&match[2].length>0&&eval(match[2])},pageMessages:function(t,e,i,n){if(t&&t.length){var s,o=(0,_jquery2.default)(e).first();if(o.length)for(var a=0,r=t.length;a<r;a++)if((s=t[a]).name&&!_jquery2.default.cookie(s.name)){var l=(0,_jquery2.default)('<div class="'+i+'">\n                <div class="'+i+'-wrapper">\n                <span class="'+i+'-text">'+s.message+'</span>\n                <div class="'+i+'-button-box">\n                  <span \n                    class="'+i+'-button" \n                    data-button\n                    data-id="'+n+'" \n                    id="'+s.name+'_button" \n                    data-cookie-name="'+s.name+'">\n                  '+(i18n.accept||"Accept")+'\n                  </span>\n                  <span\n                    class="'+i+'-button-close" \n                    data-button\n                    data-id="'+n+'" \n                    id="'+s.name+'_button_close" \n                    data-close="1"\n                    data-cookie-name="'+s.name+'">\n                  </span>\n                </div>\n                </div>\n              </div>');o.html(l),setTimeout(function(t){l.addClass("active")},100);break}}},pageNotifications:function(t,e,i,n,s){if("ms-footer-message",s&&s.length&&t&&t.length){var o,a=(0,_jquery2.default)(e).first();if(a.length)for(var r=0,l=t.length;r<l;r++){var c;if((o=t[r]).name)if(!_jquery2.default.cookie(o.name))if("break"===function(){for(var t=(0,_jquery2.default)("<ul></ul>").addClass("ms-editions"),e=0;e<s.length;e++){(0,_jquery2.default)(s[e]).each(function(e,i){var n=(0,_jquery2.default)('<div class="ms-country-flags"></div>');(0,_jquery2.default)(i.flags).each(function(t,e){n.append((0,_jquery2.default)('<div class="'+e+'"></div>'))}),t.append('<li>\n                    <a href="'+i.url+'">\n                      <span>'+i.title+"</span>\n                      "+n[0].outerHTML+"\n                    </a>\n                  </li>")})}return c=(0,_jquery2.default)('<div class="ms-footer-message">\n                <div class="ms-footer-message-wrapper">\n                <span class="ms-footer-message-text">'+o.message+"</span>\n                "+t[0].outerHTML+'\n                <div class="ms-footer-message-button-box">\n                  <span\n                    class="ms-footer-message-button-close" \n                    data-button\n                    data-id="'+n+'" \n                    id="'+o.name+'_button"\n                    data-cookie-name="'+o.name+'"\n                    data-expire="30">\n                  </span>\n                  <span\n                    class="ms-footer-message-button" \n                    data-button\n                    data-id="'+n+'" \n                    id="'+o.name+'_button"\n                    data-cookie-name="'+o.name+'"\n                    data-expire="365">\n                    '+(i18n.not_show_again||"Do not show again")+"\n                  </span>\n                </div>\n                </div>\n              </div>"),a.html(c),setTimeout(function(t){c.addClass("active")},100),"break"}())break}}},isIpadPro:function(t){var e=window.innerWidth||document.documentElement.clientWidth;return t.ipad()&&("landscape"==t.orientation&&e>1024||"portrait"==t.orientation&&1024==e)},getPhotoDetailsURL:function(){var t=(0,_jquery2.default)(document.body).data();return(t.hasParentEdtn?"/"+t.edtn:"")+"/all/photos/alias/"},wrapOldBubblePopups:function(t){t.find(".ms-article-content").find('[href*="/news/"], [href*="/team/"], [href*="/driver/"]').each(function(t,e){var i=(0,_jquery2.default)(e);if(!i.parent().data("bubbles")&&!i.closest(".ms-table").length){var n=i.attr("href").match(/\/\/[\w\.\-]+motorsport[\w\.]*\.com((\/[\w\-]+)?\/(news|article|driver|team)\/[\w\-]+\/{1})(\d+)\/?/),s=0,o="";n&&(o=n[3],s=parseInt(n[4]),"news"===o&&(o="article")),s&&o&&i.wrap('<span data-bubbles="'+o+'" data-value="'+s+'">')}})},pushNotificationsGranted:function(){try{return"granted"===this.pushNotificationsStatus()}catch(t){return!1}},pushNotificationsDenied:function(){try{return"denied"===this.pushNotificationsStatus()}catch(t){return!1}},pushNotificationsDefault:function(){try{return"default"===this.pushNotificationsStatus()}catch(t){return!1}},pushNotificationsStatus:function(){return window.Notification&&window.Notification.permission?window.Notification.permission:window.safari&&window.safari.pushNotification&&window.safari.pushNotification.permission?window.safari.pushNotification.permission("web.motorsport.com").permission:""},getBrowser:function(){return navigator.userAgent.indexOf("Firefox")>-1?"Firefox":navigator.userAgent.indexOf("Opera")>-1||navigator.userAgent.indexOf("OPR")>-1?"Opera":navigator.userAgent.indexOf("Trident")>-1?"IE":navigator.userAgent.indexOf("Edge")>-1?"Edge":navigator.userAgent.indexOf("Chrome")>-1?"Chrome":navigator.userAgent.indexOf("Safari")>-1?"Safari":"unknown"},pushNotificationsSupported:function(){return window.firebase&&firebase.messaging&&firebase.messaging.isSupported()||window.safari&&window.safari.pushNotification},$sortedMenuDrawerElements:null,toggleMenuDrawerWithAnimation:function(t){var e=(0,_jquery2.default)(".ms-main-menu-drawer").find(".ms-main-menu__animated-block"),i=e.get().map(function(t,e){return[e,(0,_jquery2.default)(t).offset().top]});i.sort(function(t,e){return t[1]>e[1]?1:-1});var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];return t.each(function(t,n){i.push(setTimeout(function(){n.classList.remove("hide"),n.classList.add("show")},100*t+(e?300:0)))}),i},s=0;i.forEach(function(i,o){var a=e.eq(i[0]);(a.is(":hidden")&&s++,t)?setTimeout(function(){a.addClass("show").removeClass("hide");var t=a.find(".ms-main-menu__animated-block-lvl2"),e=[];a.on("ms-menu-item-open.mobile-animation",function(i){var s=(0,_jquery2.default)(i.target);-1!==a.index(s)&&(e=n(t))}).on("ms-menu-item-close.mobile-animation",function(i){var n=(0,_jquery2.default)(i.target);-1!==a.index(n)&&(e.forEach(function(t){return clearTimeout(t)}),t.css("opacity",0).addClass("hide").removeClass("show"))});var i=a.filter(".active").find(".ms-main-menu__animated-block-lvl2");n(i,!0)},100*(o-s)):(a.addClass("hide").removeClass("show"),a.off("ms-menu-item-open.mobile-animation ms-menu-item-close.mobile-animation"),a.find(".ms-main-menu__animated-block-lvl2").addClass("hide").removeClass("show"))})}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cmpButtons=exports.cmpButtons={config:{selector:"body",buttons:{},error:!1,ajaxGlobal:!0},init:function(t){if(t&&t.constructor===Object)for(var e in t)this.config[e]=t[e];return this.listener(),this},options:{},groupName:!1,listener:function(){var t=this;$(this.config.selector).on("click","[data-button]",function(e){e.preventDefault();var i=$(this),n=i.data(),s=n.button||!1;if(!i.is(".disabled")&&!i.is(".wait")){if(n.propagation||e.stopPropagation(),s){if(s!=t.groupName){t.groupName=s,t.options={};var o=t.$getGroup(s);o.length&&o.each(function(){t.setOptions($(this).data())})}}else t.groupName=!1,t.options={},t.setOptions(n);n.extraParams?n.extraParams.constructor===Object?t.options.extraParams=n.extraParams:t.options.extraParams=t.extraParamsParse(n.extraParams):t.options.extraParams&&delete t.options.extraParams,void 0!==n.value?t.options.value=n.value:t.options.value&&delete t.options.value,t.click(n,this),t.options.url?t.request(n,this):t.success(n,this)}}).on("focus","[data-button]",function(e){var i=$(this).data();t.focus(i,this)}).on("blur","[data-button]",function(e){var i=$(this).data();t.blur(i,this)})},extraParamsParse:function extraParamsParse(params){return!!params&&(params.indexOf("{")<0&&(params="{"+params+"}"),eval("("+params+")"))},request:function(t,e){var i=this,n=void 0!==this.options.value&&this.options.value,s=this.options,o={},a=$(e);s.extraParams&&s.extraParams.constructor===Object&&(o=s.extraParams),n&&(s.name?o[s.name]=n:o.value=n);var r={dataType:"json",url:s.url,cache:s.cache||!0,data:o,type:s.method||"POST",global:i.config.ajaxGlobal,beforeSend:function(n,s){a.addClass("wait");var o=i.beforeSend.call(i,t,e,n,s);return!1===o&&a.removeClass("wait"),o},success:function(n,s,o){a.removeClass("wait"),n&&n.constructor===Object?i.success.call(i,t,e,n.status,n,s,o):i.error.call(i,t,e,n,s,o)},error:function(n,s){a.removeClass("wait"),i.error.call(i,t,e,{},s,n)}};$.ajax(r)},error:function(t,e,i,n,s){this.config.error&&"function"==typeof this.config.error&&this.config.error.call(this,t,e,i,n,s)},click:function(t,e){if(this.config.buttons.constructor===Object&&"id"in this.options&&this.options.id in this.config.buttons&&this.config.buttons[this.options.id].constructor===Object&&"click"in this.config.buttons[this.options.id]&&"function"==typeof this.config.buttons[this.options.id].click)return this.config.buttons[this.options.id].click.call(this,t,e)},focus:function(t,e){if(this.config.buttons.constructor===Object&&"id"in this.options&&this.options.id in this.config.buttons&&this.config.buttons[this.options.id].constructor===Object&&"focus"in this.config.buttons[this.options.id]&&"function"==typeof this.config.buttons[this.options.id].focus)return this.config.buttons[this.options.id].focus.call(this,t,e)},blur:function(t,e){if(this.config.buttons.constructor===Object&&"id"in this.options&&this.options.id in this.config.buttons&&this.config.buttons[this.options.id].constructor===Object&&"blur"in this.config.buttons[this.options.id]&&"function"==typeof this.config.buttons[this.options.id].blur)return this.config.buttons[this.options.id].blur.call(this,t,e)},beforeSend:function(t,e,i,n){if(this.config.buttons.constructor===Object&&"id"in this.options&&this.options.id in this.config.buttons&&this.config.buttons[this.options.id].constructor===Object&&"beforeSend"in this.config.buttons[this.options.id]&&"function"==typeof this.config.buttons[this.options.id].beforeSend)return this.config.buttons[this.options.id].beforeSend.call(this,t,e,i,n)},success:function(t,e,i,n,s,o){this.config.buttons.constructor===Object&&"id"in this.options&&this.options.id in this.config.buttons&&("function"==typeof this.config.buttons[this.options.id]?this.config.buttons[this.options.id].call(this,t,e,n,s,o):this.config.buttons[this.options.id].constructor===Object&&(i?"statusTrue"in this.config.buttons[this.options.id]&&"function"==typeof this.config.buttons[this.options.id].statusTrue&&this.config.buttons[this.options.id].statusTrue.call(this,t,e,n,s,o):"statusFalse"in this.config.buttons[this.options.id]&&"function"==typeof this.config.buttons[this.options.id].statusFalse&&this.config.buttons[this.options.id].statusFalse.call(this,t,e,n,s,o)))},setOptions:function(t){for(var e in t)e in this.options||"value"==e||"extraParams"==e||(this.options[e]=t[e])},$getGroup:function(t,e){return $('[data-button="'+t+'"]',e||document.body)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(13),s=i(11),o={messageAccept:function(t,e,i,n){var s=t.expire||365,o=$(e),a=o.parents(i);if(a.length){if(a.addClass("hidden"),setTimeout(function(){a.remove(),n&&$(document.body).trigger(n)},500),t.cookieName){var r=1==t.close?1:s;$.cookie(t.cookieName,1,{expires:r,path:"/"})}var l=o.attr("href");l&&goToUrl(l)}}};e.default={request:n.cmpButtonsUtils.buttons.request,requestC:n.cmpButtonsUtils.buttons.requestC,toggleBox:n.cmpButtonsUtils.buttons.toggleBox,documentScrollToTop:function(){$(document).scrollTop(0),$(window).trigger("scroll")},showLoginWindow:function(t,e){if(fn.showLoginWindow())$.cookie("redirect_url",window.location.href,{expires:1/24/60*10,path:"/"});else{var i=$(e).attr("href");i&&window.goToUrl(i)}},searchForm:function(t,e){var i=$(e),n=i.prev(".ms-search-panel-input");n.length&&n.val()&&n.val().length>=2?i.parents("form").submit():s.cmpTrayAlert.show(i18n.message_enter_at_least_characters.replace("{0}","2"),"error",3)},headerMessageAccept:function(t,e){o.messageAccept.call(this,t,e,".ms-header-message","ms-header-messages")},footerMessageAccept:function(t,e){o.messageAccept.call(this,t,e,".ms-footer-message","ms-footer-messages")},footerNotificationsClose:function(t,e){o.messageAccept.call(this,t,e,".ms-footer-message","ms-footer-notifications")},gridToggleBtns:function(t,e){if(this.toggleButtons(e,t),this.options.target&&t.on&&t.off){var i=$("."+this.options.target);i.length&&(i.removeClass(t.off).addClass(t.on),void 0===document.body.style.webkitLineClamp&&void 0!==t.value&&1==t.value&&setTimeout(function(){$(window).trigger("resize")},1),t.button&&void 0!==t.value&&$.cookie(t.cookieName||t.button,t.value,{expires:365,path:"/"}))}},editionsDrawerToggle:function(t,e){n.cmpButtonsUtils.buttons.toggleBox.click.call(this,t,e,"editionsDrawerToggle"),$(document.body).trigger("ms-editions-menu-flags-load")},scheduleToggleMobile:function(t,e){var i=$(e);!i.hasClass("active")&&"gtmDataLayer"in window&&gtmDataLayer.push({event:"msCalendarMenuOpened"}),i.toggleClass("active"),$(".ms-event-strip-widget").stop(!0).slideToggle()},goToHref:function(t,e){window.location.href=t.href},searchBox:function(t,e){var i=$(e),s=i.next(".ms-search-panel");t.toggle||s.length||$(".ms-search-panel").first().clone(!0,!0).insertAfter(i),t.toggle||i.next(".ms-search-panel").find(".ms-search-panel-input").focus(),!i.hasClass("active")&&"gtmDataLayer"in window&&gtmDataLayer.push({event:"msSearchBoxOpened"}),n.cmpButtonsUtils.buttons.toggleBox.click.call(this,t,e,"searchBox")},shareBoxToggle:function(t,e){if(n.cmpButtonsUtils.buttons.toggleBox.click.call(this,t,e,"shareBoxToggle"),!1===t.toggle){var i=$(e).parent().find(".ms-share-box-inline-items");i.length&&i.scrollLeft()>0&&i.scrollLeft(0)}},toggleFavorites:{beforeSend:function(t,e,i,n){if(i.then(function(){$('[data-button="'+t.button+'"]',document.body).removeClass("wait")},function(){$('[data-button="'+t.button+'"]',document.body).removeClass("wait")}),t.login)return"msnt"in window&&"function"==typeof msnt.openLoginWindow&&($.cookie("redirect_url",window.location.href,{expires:1/24/60*10,path:"/"}),window.msnt.openLoginWindow(),"undefined"!=typeof event&&event.preventDefault()),"gtmDataLayer"in window&&gtmDataLayer.push({event:"SaveBtnExpClick",clickType:0}),!1;var s=window.msUserData.id,o=t.entityId,a=t.entityType;if(!o){var r=$(e).parents("[data-entity-id]").data();o=r.entityId,a=r.entityType}if(s&&o&&a){var l="add";t.toggle&&(l="remove");var c={type:a,ids:[o],action:l,user_id:s};return"gtmDataLayer"in window&&gtmDataLayer.push({event:"SaveBtnExpClick",clickType:t.toggle?1:2}),n.data=JSON.stringify(c),$('[data-button="'+t.button+'"]',document.body).addClass("wait"),!0}return!1},statusTrue:function(t,e,i,o,a){if(n.cmpButtonsUtils.buttons.toggleBox.click.call(this,t,e,t.id),t.toggle)if(i.message)s.cmpTrayAlert.show(i.message,i.status?"success":"error");else if(i.status){var r='<span class="ms-icon"><svg><use xlink:href="'+t.trayIcon+'" /></svg></span><span class="ms-inner-text">'+i18n.news_saved_successfully+'<br><a href="'+t.favorites+'">'+i18n.click_here_see_saved_news+"</a></span>";s.cmpTrayAlert.show(r,"success")}else s.cmpTrayAlert.show(i18n.something_went_wrong,"error")},statusFalse:function(t,e,i,n,o){s.cmpTrayAlert.show(i18n.something_went_wrong,"error")}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.User=void 0;var n,s=i(0),o=(n=s)&&n.__esModule?n:{default:n};e.User={isUserAuthorized:function(){return"msUserData"in window&&window.msUserData.constructor===Object},updateUserDataStorage:function(t,e){"sessionStorage"in window&&(sessionStorage.getItem("msUserData")&&sessionStorage.removeItem("msUserData"),t.relogin=!!e,sessionStorage.setItem("msUserData",JSON.stringify(t)))},resetUserDataStorage:function(){"sessionStorage"in window&&(sessionStorage.getItem("msUserData")&&sessionStorage.removeItem("msUserData"))},getUser:function(t){if(window.msUserData.id)t&&"function"==typeof t&&t.call(window,window.msUserData);else{if("sessionStorage"in window){var e=sessionStorage.getItem("msUserData");if(e){var i=JSON.parse(e);if(i&&i.constructor===Object&&i.id)return window.msUserData=i,void(t&&"function"==typeof t&&t.call(window,window.msUserData))}}o.default.ajax({url:"/user-info/",success:function(e){e&&e.constructor===Object&&e.status&&e.user&&e.user.constructor===Object&&e.user.id&&(window.msUserData=e.user,"sessionStorage"in window&&sessionStorage.setItem("msUserData",JSON.stringify(e.user))),t&&"function"==typeof t&&t.call(window,window.msUserData)}})}},getUserData:function(){return"msUserData"in window?window.msUserData:{}},getUserName:function(){var t=this.getUserData(),e="";return t.firstname&&t.lastname?e=t.firstname+" "+t.lastname:t.firstname?e=t.firstname:t.lastname&&(e=t.lastname),e},renderUserUI:function(){var t=this.getUserData();t.ui||(t.avatar&&this.renderUserAvatar(t.avatar),window.msUserData.ui=!0)},renderUserAvatar:function(t){var e='<img class="rounded-border" src="'+t+'" alt="'+this.getUserName()+'">';(0,o.default)(".ms-user-avatar-m").html(e).addClass("ms-user-menu-touch-button-with-image"),(0,o.default)(".ms-user-avatar-dt").html(e)}}},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var s=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend({content:".ms-content_main",sidebar:".ms-content_sidebar",class:"ms-content_sidebar",header:".ms-topbox",context:null,reverse:!1,offsetTop:0,breakpoint:1024},e),this.$window=$(window),this.lastScroll=this.$window.scrollTop(),this.isRtl=!!$(document.body).data("edtn-rtl"),this.$content=$(this.options.content,this.options.context).eq(0),this.$sidebar=$(this.options.sidebar,this.options.context).eq(0),this.$content.length&&this.$sidebar.length&&("ResizeObserver"in window?(this.rObserver=new ResizeObserver(function(t){var e=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){o.value;i.reinit(),i.$window.trigger("resize")}}catch(t){n=!0,s=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw s}}}),this.rObserver.observe(this.$content[0]),this.rObserver.observe(this.$sidebar[0])):(this._addFakeResizeObserver(this.$content),this._addFakeResizeObserver(this.$sidebar)),this.on=!0,this.initVars(),this.initEvents(),this.$window.trigger("ms-sticky-sidebar--ready"))}return n(t,[{key:"deinit",value:function(){this.deinitEvents()}},{key:"initVars",value:function(){var t=0;t=this.$content.offset().left+this.$content.innerWidth(),(this.isRtl||this.options.reverse)&&(t=this.$content.offset().left),this.$sidebar.data("left",t),this._isState("fixed")&&this.$sidebar.css("left",t),this.options.header?this.headerHeight=$(this.options.header).height():this.headerHeight=0,this.$sidebar.is(":visible")?this.on=!0:this.on=!1}},{key:"reinit",value:function(){this.initVars(),this.handleScroll()}},{key:"initEvents",value:function(){this.reinit(),this.$window.on("resize ms-new-content--right ms-sticky-sidebar--ready",this.reinit.bind(this)),this.$window.on("scroll",this.handleScroll.bind(this)).trigger("scroll")}},{key:"deinitEvents",value:function(){this.$window.off("resize ms-new-content--right ms-sticky-sidebar--ready",this.reinit.bind(this)),this.$window.off("scroll",this.handleScroll.bind(this))}},{key:"handleScroll",value:function(t){(window.innerWidth||document.documentElement.clientWidth)>=this.options.breakpoint&&this.on&&this.doCalculations()}},{key:"doCalculations",value:function(){var t=Math.ceil(this.$sidebar.height()),e=Math.ceil(this.$content.height()),i=window.innerHeight;if(e<t)return this._changeState("top"),this.$sidebar.css("left",0),this.$sidebar.css("top",0),void this.$sidebar.data("top",0);var n=this.$window.scrollTop(),s=Math.ceil(this.$sidebar.offset().top),o=Math.ceil(this.$content.offset().top),a=this.lastScroll-n,r=t>i-this.headerHeight?t-i:0,l=e-t,c=n-o-r+this.headerHeight+(this.options.reverse?i-t:0)+this.options.offsetTop;if(c<0?c=0:Math.ceil(c)>=l-1&&(c=l),0===c&&s<=o)this._changeState("top"),this.$sidebar.css("left",0),this.$sidebar.css("top",c),this.$sidebar.data("top",0);else if(c===l&&Math.ceil(s+t)>=Math.floor(o+e)-1)this._changeState("bottom"),this.$sidebar.css("left",0),this.$sidebar.css("top",c);else{this.$sidebar.css("left",this.$sidebar.data("left"));var d=0;(d=this._isState("fixed")?parseInt(this.$sidebar.data("top")||0)+a:parseInt(this.$sidebar.css("top"))+o+a-n)>this.headerHeight||t<i-this.headerHeight?d=this.headerHeight+this.options.offsetTop:d<-r&&(d=-r),this._changeState("fixed"),this.$sidebar.css("top",d),this.$sidebar.data("top",d)}this.lastScroll=n}},{key:"_changeState",value:function(t){this._isState(t)||this.$sidebar.removeClass(this.options.class+"--top "+this.options.class+"--bottom "+this.options.class+"--fixed").addClass(this.options.class+"--"+t)}},{key:"_isState",value:function(t){return this.$sidebar.hasClass(this.options.class+"--"+t)}},{key:"_addFakeResizeObserver",value:function(t){var e=this,i=document.createElement("iframe");i.classList.add("ms-resize-observer-helper"),i.src="about:blank",i.onload=function(){t.data("height",i.contentWindow.innerHeight),i.contentWindow.addEventListener("resize",function(t){e.reinit(),e.$window.trigger("resize")})},t[0].appendChild(i)}}]),t}();e.default=s},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initDateFields=initDateFields;var _layout=__webpack_require__(1),locale="";function getDate(t){return new Date(1e3*t)}function initDateFields($context){$context=$context||document.body,locale=locale||(0,_layout.$)(document.body).data("edtn-locale"),(0,_layout.$)("[data-datems]",$context).each(function(i,elem){var $elem=(0,_layout.$)(elem);if($elem.data("datems")){var dateTime=getDate($elem.data("datems")),options={};if($elem.data("format"))try{options=eval($elem.data("format"))}catch(t){}$elem.text(new Intl.DateTimeFormat(locale,options).format(dateTime))}})}},,function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cmpTrayAlert=exports.cmpTrayAlert={cls:"cmpTrayAlert",$tray:[],config:{defaultType:"message",defaultDelay:10,fade:0,insert:0,selector:"body"},init:function(t){if(t&&t.constructor===Object)for(var e in t)this.config[e]=t[e];this.$tray=$("."+this.cls),this.$tray.length||(this.$tray=$("<div>").addClass(this.cls).appendTo(this.config.selector)),this.listener()},listener:function(){var t=this;$(this.config.selector).on("click","[data-tray-alert]",function(e){var i=$(this),n=i.data();t.show.call(t,n.trayAlert,n.trayAlertType,n.trayAlertDelay,n.trayAlertCallback,n.trayAlertId,i)}).on("click","[data-tray-alert-hide]",function(e){t.remove.call(t,$(this).parents(".item"))})},show:function show(message,type,delay,callback,id,$target){var _this=this,type=type||this.config.defaultType,delay=delay||!1!==delay&&this.config.defaultDelay,t=id||message+type+delay+"",hash=0,char;if(0==t.length)return hash;for(var i=0;i<t.length;i++)char=t.charCodeAt(i),hash=(hash<<5)-hash+char,hash&=hash;var $close=$('<div class="close icon-cross" data-key-group="cmp-tray-alert" data-tray-alert-hide></div>'),$item=$("<div>").addClass(type).attr("data-id",hash).html('<div class="text">'+message+"</div>").fadeIn(this.config.fade,function(){var $this=$(this).addClass("item");setTimeout(function(){if($this.addClass("visible"),callback&&"function"==typeof callback)callback.call(_this,$this,$target);else if(callback&&"string"==typeof callback)try{eval(callback+".call(_this, $this, $target)")}catch(t){}},100)});!1!==delay&&$item.delay(1e3*delay).show(0,function(){$(this).addClass("deleted")}).delay(1e3).fadeOut(this.config.fade,function(){_this.remove.call(_this,$(this))}),$close.appendTo($item);var $citem=this.$tray.find('[data-id="'+hash+'"]');return $citem.length?($citem.hide().after($item),$citem.remove()):this.config.insert?$item.prependTo(this.$tray):$item.appendTo(this.$tray),$item},remove:function(t){t.length&&t.remove()}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cmpConfirmAlert=exports.cmpConfirmAlert={class:"msnt-confirm",$tray:[],config:{},default:{defaultType:"message",fade:0,insert:0,selector:"body",icon:"",yesText:window.top.i18n.accept,noText:""},init:function(t){$.extend(this.config,this.default,t),this.$tray=$("."+this.class),this.$tray.length||(this.$tray=$("<div>").addClass(this.class).appendTo(this.config.selector))},listener:function listener($item,callback){var _this=this;$item.on("click","[data-confirm-no], [data-confirm-yes]",function(event){if(callback&&"function"==typeof callback)callback.call(_this,event,$(event.currentTarget).hasClass("yes"));else if(callback&&"string"==typeof callback)try{eval(callback+'.call(this, event, $(event.currentTarget).hasClass("yes"))')}catch(t){}_this.remove.call(_this,$item)})},show:function(t,e,i,n,s){e=e||this.config.defaultType;var o=n||t+e+"",a=0;if(0==o.length)return a;for(var r=0;r<o.length;r++)a=(a<<5)-a+o.charCodeAt(r),a&=a;var l=$('<div class="'+this.class+'_wrapper"><div class="text">'+t+"</div></div>");this.config.icon&&l.prepend('<svg>\n          <use xlink:href="'+this.config.icon+'"></use>\n        </svg>');var c=$("<div>").addClass(e).addClass("item visible").attr("data-id",a).append(l);if(this.config.noText||this.config.yesText){var d=$('<div class="'+this.class+'_buttons"></div>');this.config.noText&&d.append('<div class="msnt-confirm_button no" data-confirm-no>'+this.config.noText+"</div>"),this.config.yesText&&d.append('<div class="msnt-confirm_button yes" data-confirm-yes>'+this.config.yesText+"</div>"),c.append(d)}var u=this.$tray.find('[data-id="'+a+'"]');return this.listener(c,i),u.length?(u.hide().after(c),u.remove()):this.config.insert?c.prependTo(this.$tray):c.appendTo(this.$tray),c},remove:function(t){t.length&&t.remove()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cmpButtonsUtils=void 0;var n=i(4),s=e.cmpButtonsUtils={responseAlertMessages:function(t,e,i){e=e||(t.status?"message":"error"),i=i||(t.status?10:20);if(t.message)cmpTrayAlert.show(t.message,e,i);else if(t.messages&&t.messages.length){for(var n="<ul>",s=0,o=t.messages.length;s<o;s++)n+="<li>"+t.messages[s]+"</li>";n+="</ul>",cmpTrayAlert.show(n,e,i)}},toggleButtons:function(t,e){void 0===e.groupToggle&&void 0===e.multiGroupToggle||this.toggleButtons&&this.toggleButtons(t,e)},requestConfirm:function(t){var e=$(t),i=e.data();if(!i.ready)return cmpDialog.confirm(i.confirmMessage||"Are you sure?",null,function(t){t&&(e.data("ready",1),e.trigger("click"))}),!1;e.data("ready",0)},redirect:function(t,e){if("goToUrl"in window){var i=!1;"url"in e?i=e.url:"redirectUrl"in t?i=t.redirectUrl:"redirectSuccessUrl"in t&&"status"in e&&e.status?i=t.redirectSuccessUrl:"redirectFailureUrl"in t&&"status"in e&&!e.status&&(i=t.redirectFailureUrl),!1!==i&&(i&&i.length?goToUrl(i):goToUrl(window.location.href,null,{data:{preventScrolling:""}}))}},collectSelectedValues:function(t,e){if(t&&t.value){var i=$('[data-button="'+t.value+'"].selected:not([data-id])');if(i.length){var n=[];i.each(function(){var t=$(this).data();"value"in t&&n.push(t.value)}),n.length&&this.options&&"value"in this.options&&(this.options.value=n)}}},buttons:{statusTrue:function(t,e,i,n,o){s.toggleButtons.call(this,e,t),s.responseAlertMessages(i),s.redirect(t,i)},statusFalse:function(t,e,i,n,o){s.responseAlertMessages(i,"error",30),s.redirect(t,i)},request:{statusTrue:function(t,e,i,n,o){s.buttons.statusTrue.call(this,t,e,i,n,o)},statusFalse:function(t,e,i,n,o){s.buttons.statusFalse.call(this,t,e,i,n,o)}},requestC:{beforeSend:function(t,e){return s.requestConfirm(e)},statusTrue:function(t,e,i,n,o){s.buttons.statusTrue.call(this,t,e,i,n,o)},statusFalse:function(t,e,i,n,o){s.buttons.statusFalse.call(this,t,e,i,n,o)}},requestM:{click:function(t,e){s.collectSelectedValues.call(this,t,e)},beforeSend:function(t){return!(!this.options.value||this.options.value.constructor!==Array)||(t.uncheckedMessage&&cmpTrayAlert.show(t.uncheckedMessage,null,5),!1)},statusTrue:function(t,e,i,n,o){s.buttons.statusTrue.call(this,t,e,i,n,o)},statusFalse:function(t,e,i,n,o){s.buttons.statusFalse.call(this,t,e,i,n,o)}},requestMC:{click:function(t,e){s.collectSelectedValues.call(this,t,e)},beforeSend:function(t,e){return this.options.value&&this.options.value.constructor===Array?s.requestConfirm(e):(t.uncheckedMessage&&cmpTrayAlert.show(t.uncheckedMessage,null,5),!1)},statusTrue:function(t,e,i,n,o){s.buttons.statusTrue.call(this,t,e,i,n,o)},statusFalse:function(t,e,i,n,o){s.buttons.statusFalse.call(this,t,e,i,n,o)}},select:function(t,e){$(e).toggleClass("selected");var i=$('[data-button][data-value="'+t.button+'"]'),n=$('[data-select-toggle-box="'+t.button+'"]'),s=$('[data-button="'+t.button+'"].selected');i.length&&(s.length?(i.filter(".select").removeClass("active").addClass("disabled"),i.filter(".deselect").removeClass("disabled").addClass("active")):(i.filter(".deselect").removeClass("active").addClass("disabled"),i.filter(".select").removeClass("disabled").addClass("active"))),n.length&&(s.length?n.removeClass("disabled").addClass("active"):n.removeClass("active").addClass("disabled"))},selectAll:function(t,e){if(t&&t.value){var i=$('[data-button="'+t.value+'"]:not([data-id])'),n=$('[data-select-toggle-box="'+t.value+'"]');if(i.length&&(this.toggleButtons&&this.toggleButtons(e,t),$(e).is(".select")?i.addClass("selected"):i.removeClass("selected")),n.length)(i=$('[data-button="'+t.value+'"].selected')).length?n.removeClass("disabled").addClass("active"):n.removeClass("active").addClass("disabled")}},toggleBox:{click:function(t,e,i){var s=$(e);if("multi"in t&&(s=$('[data-button][data-id="'+(i||"toggleBox")+'"][data-value='+t.value+"]")),"value"in t){var o=$('[data-button-target="'+t.value+'"]');if(t.toggle)return s.removeClass("active"),s.data("toggle",!1),o.removeClass("enabled done").addClass("disabled"),!1;if(void 0!==t.clear&&"string"==typeof t.clear?($('[data-button][data-id][data-value="'+t.clear+'"].active:not([data-static])').removeClass("active").data("toggle",!1),$('[data-button-target="'+t.clear+'"]:not([data-static])').removeClass("enabled done").addClass("disabled")):1==t.clear?($("[data-button][data-id].active:not([data-static])").removeClass("active").data("toggle",!1),$("[data-button-target]:not([data-static])").removeClass("enabled done").addClass("disabled")):2==t.clear?($("[data-button][data-id].active:not([data-static])").removeClass("active").data("toggle",!1),$("[data-button-target]:not([data-static])").removeClass("enabled done").addClass("disabled"),$(document.body).on("click.clear-togle-box-"+t.value,function(s){if($('[data-button][data-id][data-value="'+t.value+'"].active:not([data-static])').removeClass("active").data("toggle",!1),$('[data-button-target="'+t.value+'"]:not([data-static])').removeClass("enabled done").addClass("disabled"),$(this).off("click.clear-togle-box-"+t.value),i){var o=n.cmpButtons.config.buttons[i+"Close"];"function"==typeof o&&o(t,e)}})):3==t.clear&&$(document.body).on("click.clear-togle-box-"+t.value,function(e){$('[data-button][data-id][data-value="'+t.value+'"].active:not([data-static])').removeClass("active").data("toggle",!1),$('[data-button-target="'+t.value+'"]:not([data-static])').removeClass("enabled done").addClass("disabled"),$(this).off("click.clear-togle-box-"+t.value)}),s.addClass("active"),s.data("toggle",!0),o.removeClass("disabled").addClass("enabled"),"delay"in t){var a=parseFloat(t.delay),r=!1;isNaN(a)||(clearTimeout(r),r=setTimeout(function(){o.is(".enabled")&&o.addClass("done")},1e3*a))}return!0}},blur:function(t,e){if("blur"in t&&"value"in t){var i=$(e);setTimeout(function(){i.removeClass("active"),i.data("toggle",!1),$('[data-button-target="'+t.value+'"]').removeClass("enabled done").addClass("disabled")},300)}}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[];e.default=function(t){t.each(function(t,e){var i=$(e),s=i.data();n.push(i);var o=(new Date).getTime(),a=s.initTime,r=a?o-a:0;i.data("targetDate",new Date(o+1e3*s.msLeft-r)),i.attr("data-init-time",o)});var e=setInterval(function(i){var s=new Date;n=$.map(t,function(t,e){var i=$(t),n=0;i.data("targetDate")&&(n=+((i.data("targetDate").getTime()-s.getTime())/1e3).toFixed(0));var o,a,r,l,c,d,u,h={},f=!0;return n<1?(h={h:"00",m:"00",s:"00"},f=!1):(o=n,a=Math.floor(o/86400),r=86400*a,l=Math.floor((o-r)/3600),c=3600*l,d=Math.floor((o-r-c)/60),h={s:u=(u=o-r-c-60*d)>9?u:"0"+u,m:d=d>9?d:"0"+d,h:l=l>9?l:"0"+l,d:a=a>9?a:"0"+a}),i.find(".ms-schedule-item-countdown_hours").text(h.h),i.find(".ms-schedule-item-countdown_minutes").text(h.m),i.find(".ms-schedule-item-countdown_seconds").text(h.s),f?t:null}),t.length||clearInterval(e)},1e3)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(18),a=(n=o)&&n.__esModule?n:{default:n};var r=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,$.extend({showIcon:!0,showName:!1,showTitle:!1,showLabel:!0,showCount:!0,styleClass:"",init:!1,selectorStyleClass:"ms-share-box-dropdown-container"},t)));return i.mouseenterTimeout=null,i.init(null,i.initDropdown.bind(i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),s(e,[{key:"render",value:function(t){return'\n        <div class="ms-share-box-dropdown '+this.options.styleClass+'">\n           \n            <div class="ms-share-box-dropdown-items">\n                <div class="ms-share-box-dropdown-items-wrapper">'+this.renderItems(t)+"</div>\n            </div>\n        </div>"}},{key:"getDropdownPosition",value:function(t){var e=t.getBoundingClientRect(),i=document.documentElement.clientWidth,n=document.documentElement.clientHeight;return e.left>i/2?e.top>n/2?4:2:e.top>n/2?3:1}},{key:"initDropdown",value:function(t,e,i){var n=this;t.on("mouseenter",function(){clearTimeout(n.mouseenterTimeout),n.mouseenterTimeout=setTimeout(function(){t.data("shareBoxReady")||(n.initRender(t,e,i),t.attr("share-box-dropdown-pos","-1")),t.attr("share-box-dropdown-pos",0);var s=n.getDropdownPosition(t.find(".ms-share-box-dropdown").get(0));t.attr("share-box-dropdown-pos",s)},400)}).on("mouseleave",function(){clearTimeout(n.mouseenterTimeout),t.attr("share-box-dropdown-pos","-1")})}}]),e}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s="__"+t,o=a.default.fn[t];a.default.fn[t]=function(t){return this.each(function(){var i=(0,a.default)(this),o=i.data(s),r=a.default.extend({},e.DEFAULTS,i.data(),"object"===(void 0===t?"undefined":n(t))&&t);o||i.data(s,o=new e(this,r)),"string"==typeof t&&o[t]()})},i&&(a.default[t]=function(e){return(0,a.default)({})[t](e)});a.default.fn[t].noConflict=function(){return a.default.fn[t]=o}};var s,o=i(0),a=(s=o)&&s.__esModule?s:{default:s}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.currentPage={}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ShareBox=function(){function ShareBox(t){_classCallCheck(this,ShareBox),this.options=$.extend({selector:"ms-share-conteiner",selectorStyleClass:!1,insert:"after",data:!1,init:!0,showIcon:!0,showName:!0,showTitle:!0,showLabel:!1,showCount:!0,onAfterShare:!1},t),this.options.init&&this.init()}return _createClass(ShareBox,[{key:"renderIcon",value:function(t,e){return e?'\n        <span class="ms-share-box-icon">\n        <svg class="ms-'+t+'-bg">\n            <use xlink:href="'+e+'"/>\n        </svg>\n        </span>':""}},{key:"renderName",value:function(t,e){return'<span class="ms-share-box-name">'+(e||t)+"</span>"}},{key:"renderLabel",value:function(t,e){return'<span class="ms-share-box-title">'+(e||t)+"</span>"}},{key:"renderCount",value:function(t){return'<span class="ms-share-box-count"'+(parseInt(t)?"":' data-empty="1"')+">"+(t||"")+"</span>"}},{key:"paramsParse",value:function paramsParse(params){return!!params&&(params.indexOf("{")<0&&(params="{"+params+"}"),eval("("+params+")"))}},{key:"getCountFromConteinerData",value:function(t,e){if(e&&e.constructor===Object&&e.shareBoxCounts){var i=!1;return(i=e.shareBoxCounts.constructor===Object?e.shareBoxCounts:this.paramsParse(e.shareBoxCounts))[t]?i[t]:0}return 0}},{key:"renderItemOptions",value:function(t,e,i){var n="";if(this.options.showIcon&&(n+=this.renderIcon(e.icon,e.icon_url)),this.options.showName&&(n+=this.renderName(t,e.official_name)),this.options.showLabel&&(n+=this.renderLabel(t,e.share_title)),this.options.showCount){var s=this.getCountFromConteinerData(t,i);s&&(n+=this.renderCount(s))}return n}},{key:"renderTitle",value:function(t,e){return this.options.showTitle?' title="'+(e||t)+'"':""}},{key:"renderItemParams",value:function(t,e,i){try{var n=i.shareUrl||window.top.location.href,s=i.shareTitle||window.top.document.title}catch(t){console.error(t)}var o="";if(e.share_url&&e.share_options){var a={},r={url:n,title:s};for(var l in i.shareImage&&(r.image=i.shareImage),e.share_options)r[l]&&(a[e.share_options[l]]=r[l]);e.share_params&&(a=$.extend(a,e.share_params)),o=' href="'+e.share_url+"?"+$.param(a)+'"'}var c=i.entityType?' data-entity-type="'+i.entityType+'"':"",d=i.entityId?' data-entity-id="'+i.entityId+'"':"",u=e.share_collect?' data-collect="1"':"",h=e.share_target?' data-target="'+e.share_target+'"':"";return' data-name="'+t+'" '+(e.official_name?' data-official-name="'+e.official_name+'"':"")+(e.behavior?' data-behavior="'+e.behavior+'"':"")+o+c+d+u+h}},{key:"renderItem",value:function(t,e,i){return'<a class="ms-share-box-item ms-share-box-item--'+t+'"'+this.renderItemParams(t,e,i)+this.renderTitle(t,e.share_title)+">"+this.renderItemOptions(t,e,i)+"</a>"}},{key:"renderItems",value:function(t){var e=this.options.data,i="";for(var n in e)i+=this.renderItem(n,e[n],t);return i}},{key:"render",value:function(t){return'<div class="ms-share-box-items">'+this.renderItems(t)+"</div>"}},{key:"goToHref",value:function(t){var e=t.attr("href");e&&(window.location.href=e)}},{key:"share",value:function(t,e){var i=$(t),n=i.data();if(n&&"native"==n.behavior)this.goToHref(i);else{var s=i.attr("href");s&&(window.open(s,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+(n.share_height||500)+",width="+(n.share_width||500)),this.options.onAfterShare&&$.isFunction(this.options.onAfterShare)&&this.options.onAfterShare.call(t,n,e))}}},{key:"afterRender",value:function(t,e,i){return t}},{key:"initRender",value:function(t,e,i){var n=this.render(i);if(n){"before"==this.options.insert?t.prepend(n):t.append(n),this.options.selectorStyleClass&&t.addClass(this.options.selectorStyleClass);var s=this;t.on("click",".ms-share-box-item",function(t){t.preventDefault(),s.share(this,i)}),t.attr("data-share-box-ready",1),this.afterRender.call(this,t,e,i)}}},{key:"init",value:function(t,e){var i=$(t||this.options.selector).filter(':not([data-share-box-ready="1"])');if(i.length){var n=this,s=this.options.data;s&&s.constructor===Object&&i.each(function(){var t=$(this),i=t.data();e&&$.isFunction(e)?e.call(this,t,s,i):n.initRender(t,s,i)})}}},{key:"destroy",value:function(t){var e=$(t||this.options.selector);e.length&&e.empty().attr("data-share-box-ready",0)}}]),ShareBox}();exports.default=ShareBox},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cmpDialog=exports.cmpDialog={cls:"cmpDialog",$contayner:[],config:{buttonOk:"Ok",buttonCancel:"Cancel",buttonClose:"Close",keyReturn:27,selector:"body"},init:function(t){if(t&&t.constructor===Object)for(var e in t)this.config[e]=t[e];this.$contayner=$("."+this.cls),this.$contayner.length||(this.$contayner=$("<div></div>").addClass(this.cls).appendTo(this.config.selector)),this.listener()},listener:function(){var t=this;$(this.config.selector).on("click","[data-dialog]",function(e){var i=$(this).data();t.show.call(t,i.dialogType||"alert",i.dialog,i.dialogTitle,i.dialogCallback,i.dialogStyle)}).on("click","[data-dialog-ok]",function(e){t.remove.call(t,1)}).on("click","[data-dialog-cancel]",function(e){t.remove.call(t,$(this).data("dialog-cancel"))})},$selectedElement:[],alert:function(t,e,i,n){this.show.call(this,"alert",t,e,i,n)},confirm:function(t,e,i,n){this.show.call(this,"confirm",t,e,i,n)},content:function(t,e,i,n,s){this.show.call(this,"content",t,e,i,n,s)},active:!1,show:function(t,e,i,n,s,o){var a=this;this.active&&(this.empty(),this.keydownOff()),"keyNavigation"in window&&(this.$selectedElement=keyNavigation.$getSelectedElement()),this.$contayner.addClass(t),s&&this.$contayner.addClass(s);var r=$('<div data-dialog-cancel="0"></div>').addClass("overlay").appendTo(this.$contayner),l=$("<div></div>").addClass("box").appendTo(this.$contayner);$('<div class="content">'+e+"</div>").appendTo(l),i&&($('<div class="title">'+i+"</div>").prependTo(l),l.addClass("head"));var c=$('<span class="close icon-cross" data-key-group="cmp-dialog-hide" data-down="cmp-dialog" data-up data-right data-left data-dialog-cancel="0" title="'+this.config.buttonClose+'"></span>').prependTo(l);if($(document).on("keydown.escapeDialog",function(t){t.keyCode==a.config.keyReturn&&(t.stopPropagation(),c.trigger("click"))}),"alert"==t||"confirm"==t){var d=$("<div>").addClass("buttons").appendTo(l),u=$('<button class="ok" data-key-group="cmp-dialog-button" data-left data-down data-up="cmp-dialog-hide" data-dialog-ok title="'+this.config.buttonOk+'"></button>').appendTo(d);"alert"==t&&(u.attr("data-right",""),c.attr("data-dialog-cancel",1),r.attr("data-dialog-cancel",1)),"confirm"==t&&$('<button class="cancel" data-key-group="cmp-dialog-button" data-right data-down data-up="cmp-dialog-hide" data-dialog-cancel="0" title="'+this.config.buttonCancel+'"></button>').appendTo(d),this.$contayner.addClass("visible"),setTimeout(function(){u.focus()},10)}else this.$contayner.addClass("visible"),setTimeout(function(){c.focus(),o&&"function"==typeof o&&o.call(a)},10);this.callback=n,this.active=!0},hide:function(){this.active&&this.$contayner.hasClass("visible")&&this.$contayner.removeClass("visible")},callback:!1,empty:function(){this.$contayner.empty().attr("class","").addClass(this.cls)},keydownOff:function(){$(document).off("keydown.escapeDialog")},remove:function remove(cancel){if(this.empty(),this.keydownOff(),this.callback&&"function"==typeof this.callback){var r=this.callback.call(this,cancel);r||this.selectKeyElement()}else if(this.callback&&"string"==typeof this.callback)try{var r=eval(this.callback+".call(this, cancel)");r||this.selectKeyElement()}catch(t){}else this.selectKeyElement();this.callback=!1,this.active=!1},selectKeyElement:function(){"keyNavigation"in window&&this.$selectedElement.length&&this.$selectedElement.keySelectElement()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clearToken=e.showNotificationConfirmWindow=e.subscribeToPushMessages=e.getTokenAndSubscribeForUpdates=e.retrieveCachedToken=e.updateTokenEdition=e.updateTokenOnServer=e.sendTokenToServer=e.requestPermission=void 0;var n,s=i(0),o=(n=s)&&n.__esModule?n:{default:n};i(10);var a=i(12),r=i(6);var l=(0,o.default)(document.body).data("edtn");function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=null,s=null,a=u();function c(){o.default.post("/notification/register/",{token:t,device_id:n,userId:s,platform:e}).then(function(e){e.token=t,e.version=msConfigVars.notificationServiceVersion,e.edition=l,(0,o.default)(window).trigger("ms-pn-data-changed",[e]),h(e)})}i?(a&&(n=a.device_id,s=a.user_id),c()):r.User.isUserAuthorized()?a?a.version!==msConfigVars.notificationServiceVersion&&r.User.getUser(function(t){n=a.device_id,s=t.id,c()}):c():function(t){var e=u();return e&&e.token===t&&e.version===msConfigVars.notificationServiceVersion}(t)||c()}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=u();null===i&&n&&n.token!==t&&(i=!0),n&&!i||c(t,e,i)}function u(){try{return JSON.parse(firebase.messaging.isSupported()?localStorage.getItem("msPushNotificationToken"):o.default.cookie("msPushNotificationToken"))}catch(t){}}function h(t){try{var e=JSON.stringify(t);firebase.messaging.isSupported()?localStorage.setItem("msPushNotificationToken",e):o.default.cookie("msPushNotificationToken",e,{path:"/",expires:3650,domain:".motorsport.com",secure:!0})}catch(t){}}function f(){try{firebase.messaging.isSupported()?localStorage.removeItem("msPushNotificationToken"):o.default.removeCookie("msPushNotificationToken")}catch(t){console.warn("Unable to clear PN token")}}e.requestPermission=function(t){return t.requestPermission().then(function(){"gtmDataLayer"in window&&gtmDataLayer.push({event:"WebPushNotifications",WebPushNotificationsAction:"allowed"})}).catch(function(t){try{localStorage.getItem("msPushNotificationsRejectedGA")||(localStorage.setItem("msPushNotificationsRejectedGA","1"),"gtmDataLayer"in window&&gtmDataLayer.push({event:"WebPushNotifications",WebPushNotificationsAction:"rejected"}))}catch(t){}})},e.sendTokenToServer=c,e.updateTokenOnServer=d,e.updateTokenEdition=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l!==t.edition&&o.default.post("/notification/change-edition/",{token:t.token,user_id:t.user_id,device_id:t.device_id,platform:e},function(e){t.edition=l,h(t)})},e.retrieveCachedToken=u,e.getTokenAndSubscribeForUpdates=function(t){t.getToken().then(function(t){d(t)}).catch(function(t){console.warn("An error occurred while retrieving token. ",t),f()}),t.onTokenRefresh(function(){t.getToken().then(function(t){d(t,null,!0)}).catch(function(t){console.warn("Unable to retrieve refreshed token ",t),f()})})},e.subscribeToPushMessages=function(t,e){t.onMessage(function(t){navigator.serviceWorker.getRegistration().then(function(e){console.log("!!!\t\tPN: show notification via SW"),e.showNotification(t.notification.title,{body:t.notification.body,icon:t.data.icon,tag:t.data.url,image:t.notification.image,data:{url:t.data.url}})})})},e.showNotificationConfirmWindow=function(t){a.cmpConfirmAlert.init({yesText:i18n.notification_allow,noText:i18n.notification_later,icon:window.msConfigVars.icons.bell}),a.cmpConfirmAlert.show(i18n.notification_allow_text,"notification",t)},e.clearToken=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!a.fn.pushNotificationsSupported())return;if(window.safari&&window.safari.pushNotification)return;a.fn.pushNotificationsDefault()?o.default.cookie("push_notifications")||(0,r.showNotificationConfirmWindow)(function(t,e){e?h():o.default.cookie("push_notifications",1,{expires:7,path:"/",secure:!0})}):a.fn.pushNotificationsGranted()&&h()};var n,s=i(0),o=(n=s)&&n.__esModule?n:{default:n};i(10);var a=i(3),r=i(20);var l={apiKey:"AIzaSyAH-gEneE4iI0Bz7TY_BbfeT64e2nDFN0I",authDomain:"motorsport-mobile-app.firebaseapp.com",databaseURL:"https://motorsport-mobile-app.firebaseio.com",projectId:"motorsport-mobile-app",storageBucket:"motorsport-mobile-app.appspot.com",messagingSenderId:"6407203112",appId:"1:6407203112:web:bf8543d3bdd05cc0a2c81d",measurementId:"G-4XBQ2WFYV9"},c=void 0;try{var d=firebase.messaging.isSupported()?localStorage.getItem("msPushNotificationToken"):o.default.cookie("msPushNotificationToken");d&&!a.fn.pushNotificationsDefault()&&(c=JSON.parse(d))}catch(t){}if(c){var u=window.safari&&window.safari.pushNotification;(0,r.sendTokenToServer)(c.token,u?"safari":null),u&&(0,r.updateTokenEdition)(c,u?"safari":null)}function h(){if(firebase.messaging.isSupported()){firebase.initializeApp(l);var t=firebase.messaging();t.usePublicVapidKey("BHuE6QQHcqXRXTrPb2Cfhh4w1an8K1pPkoWKMbjypoNFJCL5C0ZMjcEoh46kxSbS5PAkERoGz_FXCA-mWlzZ_Bk"),a.fn.pushNotificationsDefault()?(0,r.requestPermission)(t).then(function(){navigator.serviceWorker.register("/firebase-messaging-sw.js").then(function(){navigator.serviceWorker.ready.then(function(e){t.useServiceWorker(e),(0,r.getTokenAndSubscribeForUpdates)(t),(0,r.subscribeToPushMessages)(t)})})}):a.fn.pushNotificationsGranted()&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(function(){navigator.serviceWorker.ready.then(function(e){t.useServiceWorker(e),(0,r.getTokenAndSubscribeForUpdates)(t),(0,r.subscribeToPushMessages)(t)})})}else if(window.safari&&window.safari.pushNotification){var e=window.safari.pushNotification.permission("web.motorsport.com");if("denied"===e.permission);else if("default"===e.permission){var i=window.location.origin;window.safari.pushNotification.requestPermission(i,"web.motorsport.com",{},function(t){if("granted"===t.permission)try{"gtmDataLayer"in window&&gtmDataLayer.push({event:"WebPushNotifications",WebPushNotificationsAction:"allowed"}),(0,r.sendTokenToServer)(t.deviceToken,"safari")}catch(t){}})}else try{localStorage.getItem("msPushNotificationsRejectedGA")||(localStorage.setItem("msPushNotificationsRejectedGA","1"),"gtmDataLayer"in window&&gtmDataLayer.push({event:"WebPushNotifications",WebPushNotificationsAction:"rejected"}))}catch(t){}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Piano=void 0;var n=i(1),s=i(56);e.Piano={init:function(){var t=this;window.tp=window.tp||[],this.options=window.pncfg||{},tp.push(["setUseTinypassAccounts",!1]),tp.push(["setUsePianoIdUserProvider",!1]),tp.push(["setUsePianoIdLiteUserProvider",!0]),tp.push(["init",function(){tp.enableGACrossDomainLinking(),"gtmDataLayer"in window&&gtmDataLayer.push({event:"pianoLoaded"})}]),this._initUser(),this._setContentSection(),this._setTags(),(0,n.$)(window).on("message",function(e){var i=e.originalEvent;"https://sandbox.tinypass.com"!==i.origin&&"https://buy.tinypass.com"!==i.origin||t.doAction(i.data)})},doAction:function(t){t&&(0,s.isObject)(t)&&t.action&&this[t.action]&&"function"==typeof this[t.action]&&this[t.action](t)},goToUrl:function(t){t.url?window.location.href=t.url:window.location.reload()},showLoginWindow:function(){return n.fn.showLoginWindow()},_initUser:function(){if(window.externalJWT){tp.push(["setExternalJWT",window.externalJWT]);var t=n.$.cookie("checkout_params");if(t)try{tp.push(["init",function(){tp.offer.startCheckout(JSON.parse(decodeURIComponent(t)))}])}catch(t){}}tp.push(["addHandler","loginRequired",function(t){return window.externalJWT?(tp.push(["setExternalJWT",window.externalJWT]),tp.offer.startCheckout(t)):(n.$.cookie("redirect_url",window.location.href,{expires:1/24/60*10,path:"/"}),t.reloadAfterLogin=!1,n.$.cookie("checkout_params",encodeURIComponent(JSON.stringify(t)),{expires:1/24/60*10,path:"/"}),"msnt"in window&&"function"==typeof msnt.openIframeWindow?(msnt.register=!0,msnt.openIframeWindow()):"msnt"in window&&"function"==typeof msnt.openLoginWindow&&msnt.openLoginWindow()),!1}]),tp.push(["addHandler","checkoutComplete",function(t){n.$.removeCookie("mscpc",{path:"/",domain:window.location.hostname.match(/.\w*\.\w*$/gi)[0]})}]),tp.push(["addHandler","checkoutClose",function(t){switch(n.$.removeCookie("mscpc",{path:"/",domain:window.location.hostname.match(/.\w*\.\w*$/gi)[0]}),n.$.removeCookie("checkout_params",{path:"/"}),t.state){case"checkoutCompleted":case"alreadyHasAccess":window.location.href="/"}}])},_setContentSection:function(){tp.push(["setContentSection",(0,n.$)(document.body).data("page-content-type")+(0,n.$)(document.body).data("page-type")])},_setTags:function(){var t=["edition-"+(0,n.$)(document.body).data("edtn"),"type-"+(0,n.$)(document.body).data("page-content-type")];(0,n.$)(".ms-page").data("prime")?t.push("isPrime"):t.push("notPrime"),(0,n.$)(".ms-page").data("ads")?t.push("showAds"):t.push("noAds"),tp.push(["setTags",t])},showOffer:function(t){this.options.offer_id&&(t.templateId=this.options.offer_id,t.offerId="OF17MVJJ0ECW",t.displayMode="inline",this.initPianoTemplate("offer",t))},showTemplate:function(t){this.initPianoTemplate("template",t)},initPianoTemplate:function(t,e){tp.push(["init",function(){tp[t].show(e)}])},showAccountSummary:function(){tp=window.tp||[],tp.push(["init",function(){tp.myaccount.show({displayMode:"inline",containerSelector:"#account_summary"})}])}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={init:function(t){t=$.extend({selector:null,dataEntityIdAttrName:"data-entity-id",type:[],url:!1,minCount:0},t);var e=$(window),i=$([]);if((i=t.selector?$(t.selector).find("["+t.dataEntityIdAttrName+']:not([data-counts-ready="1"])'):$("["+t.dataEntityIdAttrName+"]").filter(':not([data-counts-ready="1"])')).length){var n={},s=!1;if(i.each(function(){var t=$(this),e=t.data();if(e.entityId&&e.entityType){e.entityType in n||(n[e.entityType]={types:[],ids:[]}),n[e.entityType].ids.push(e.entityId);var i=t.find("[data-count-type]");i.length&&i.each(function(){var t=$(this).data(),i=t.countType;"view"==i&&t.sendAsCurrent&&(s={entity:e.entityType,id:e.entityId}),-1==$.inArray(i,n[e.entityType].types)&&n[e.entityType].types.push(i)})}}),t.url){var o={items:n};s&&(o.current_item=s),o.edition=$(document.body).data("edtn"),o.user_id=window.msUserData&&window.msUserData.id?window.msUserData.id:0,$.post({url:t.url,data:JSON.stringify(o),success:function(n){n&&n.constructor===Object&&n.status&&n.items&&n.items.constructor===Object&&(i.each(function(){var e=$(this),i=e.data();if(i.entityId&&i.entityType){if(i.entityType in n.items&&i.entityId in n.items[i.entityType]){var s=n.items[i.entityType][i.entityId],o=!1,a=0,r=$([]),l=$([]);for(var c in s)if((r=e.find('[data-count-type="'+c+'"]')).length)if("favorite"==c)s[c].constructor===Object&&"favorite"in s[c]&&s[c].favorite?r.addClass("active").data("toggle",1):"boolean"==typeof s[c]&&s[c]&&r.addClass("active").data("toggle",1);else if("trending"==c)s[c]&&r.addClass("active");else{if((l=r.find("[data-count-value]")).length||(l=r),"share"==c){"total"in s[c]&&"label"in s[c].total&&(o=s[c].total.label,a=s[c].total.count);var d=s[c].services;if(d&&d.length){for(var u={},h=0,f=d.length;h<f;h++)d[h].network&&d[h].label&&(u[d[h].network]=d[h].label);r.data("share-box-counts",u)}}else o=s[c].label||!1,a=s[c].count;o&&l.html(o),a?l.attr("data-count-value",a):l.attr("data-count-value","0");var p=l.data("min-count")||t.minCount-1;(!a||a<p)&&r.attr("data-empty","1")}}e.attr("data-counts-ready",1)}}),e.trigger("ms-counts-updates",[i,n]))}})}}}}},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=r(i(0)),o=r(i(7)),a=r(i(16));function r(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$element=(0,s.default)(e),this.options=i,this.init()}return n(t,[{key:"init",value:function(){"desktop"===o.default.type?this.$element.on("mouseenter focus",this.options.target,this.showList.bind(this)).on("mouseleave blur",this.options.target,this.hideList.bind(this)):this.$element.on("click",this.options.target,this.toggleList.bind(this))}},{key:"showList",value:function(t){var e=(0,s.default)(t.currentTarget),i=this.calculatePosition(t.currentTarget);e.attr("data-pos",i).addClass("open")}},{key:"calculatePosition",value:function(t){var e="top",i=t.getBoundingClientRect(),n=document.documentElement.clientHeight;return i.top>n/2&&(e="bottom"),e}},{key:"hideList",value:function(t){(0,s.default)(t.currentTarget).removeClass("open")}},{key:"toggleList",value:function(t){var e=(0,s.default)(t.currentTarget);if(e.hasClass("open"))e.removeClass("open");else{var i=this.calculatePosition(t.currentTarget);e.attr("data-pos",i).addClass("open")}}}]),t}();l.DEFAULTS={target:".ms-dropdown"},(0,a.default)("msDropdown",l)},function(t,e,i){"use strict";var n,s;"function"==typeof Symbol&&Symbol.iterator;"undefined"!=typeof window&&window,n=[i(0)],void 0===(s=function(t){return function(t,e,i){var n=e.event.special,s="D"+ +new Date,o="D"+(+new Date+1);n.scrollstart={setup:function(){var t,i=function(i){var s=arguments;t?clearTimeout(t):(i.type="scrollstart",e.event.dispatch.apply(this,s)),t=setTimeout(function(){t=null},n.scrollstop.latency)};e(this).bind("scroll",i).data(s,i)},teardown:function(){e(this).unbind("scroll",e(this).data(s))}},n.scrollstop={latency:300,setup:function(){var t,i=function(i){var s=this,o=arguments;t&&clearTimeout(t),t=setTimeout(function(){t=null,i.type="scrollstop",e.event.dispatch.apply(s,o)},n.scrollstop.latency)};e(this).bind("scroll",i).data(o,i)},teardown:function(){e(this).unbind("scroll",e(this).data(o))}}}(0,t)}.apply(e,n))||(t.exports=s)},function(t,e,i){"use strict";var n,s,o;"function"==typeof Symbol&&Symbol.iterator;
/*!
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2015 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.9.7
 *
 */
o="undefined"!=typeof window?window:void 0,n=[i(0)],void 0===(s=function(t){return function(t,e,i){var n=e(t);e.fn.lazyload=function(s){var o,a=this,r={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function l(){var t=0;a.each(function(){var i=e(this);if(!r.skip_invisible||i.is(":visible"))if(e.abovethetop(this,r)||e.leftofbegin(this,r));else if(e.belowthefold(this,r)||e.rightoffold(this,r)){if(++t>r.failure_limit)return!1}else i.trigger("appear"),t=0})}return s&&(i!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),i!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(r,s)),o=r.container===i||r.container===t?n:e(r.container),0===r.event.indexOf("scroll")&&o.bind(r.event,function(){return l()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,n.attr("src")!==i&&!1!==n.attr("src")||n.is("img")&&n.attr("src",r.placeholder),n.one("appear",function(){if(!this.loaded){if(r.appear){var i=a.length;r.appear.call(t,i,r)}e("<img />").bind("load",function(){var i=n.attr("data-"+r.data_attribute);n.hide(),n.is("img")?n.attr("src",i):n.css("background-image","url('"+i+"')"),n[r.effect](r.effect_speed),t.loaded=!0;var s=e.grep(a,function(t){return!t.loaded});if(a=e(s),r.load){var o=a.length;r.load.call(t,o,r)}}).attr("src",n.attr("data-"+r.data_attribute))}}),0!==r.event.indexOf("scroll")&&n.bind(r.event,function(){t.loaded||n.trigger("appear")})}),n.bind("resize",function(){l()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&n.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&a.each(function(){e(this).trigger("appear")})}),e(document).ready(function(){l()}),this},e.belowthefold=function(s,o){return(o.container===i||o.container===t?(t.innerHeight?t.innerHeight:n.height())+n.scrollTop():e(o.container).offset().top+e(o.container).height())<=e(s).offset().top-o.threshold},e.rightoffold=function(s,o){return(o.container===i||o.container===t?n.width()+n.scrollLeft():e(o.container).offset().left+e(o.container).width())<=e(s).offset().left-o.threshold},e.abovethetop=function(s,o){return(o.container===i||o.container===t?n.scrollTop():e(o.container).offset().top)>=e(s).offset().top+o.threshold+e(s).height()},e.leftofbegin=function(s,o){return(o.container===i||o.container===t?n.scrollLeft():e(o.container).offset().left)>=e(s).offset().left+o.threshold+e(s).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(o,t)}.apply(e,n))||(t.exports=s)},function(t,e,i){"use strict";window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.formValidateConfig={ready:!0,translate:function(t,e){return"translate"in window?window.translate(t,e):e||t},init:function(t){if(n.ready){var e=t.forms||{};$.validator.setDefaults({onkeyup:!1,focusCleanup:!1,focusInvalid:!0,errorPlacement:function(t,e){var i=e.parent();if(i.is("label")){var n=i.next();n.is(".error")?n.html(t):t.insertAfter(i)}else t.insertAfter(e);e.is(".bubbleError")&&t.wrap('<div class="errorBubble"></div>')},errorElement:"div",submitHandler:function(){var t=this,i=$(t.currentForm);if("get"==i.attr("method").toLowerCase()){var n=[];i.find("input, select, textarea").not(':submit, :reset, :image, [disabled], [name="send"], [data-ignor]').each(function(){var t=this.name;if(t){var e=$.fieldValue(this);if(e&&e.constructor==Array)for(var i=0,s=e.length;i<s;i++)n.push({name:t,value:e[i]});else""!==$.trim(e)&&null!=e&&n.push({name:this.name,value:e})}});var s=i.attr("action");if(s){if(i.data("params-strickt")&&!n.length)return;if(n.length){var o=$.param(n);s=s.indexOf("?")<0?s+"?"+o:s+"&"+o}"goToUrl"in window?goToUrl(s):window.location=s}}else{var a=$(t.submitButton),r=i.attr("id"),l=e&&e.config&&e.config[r]?e.config[r]:{},c={};if(a.is(".wait")||a.is(".disabled"))return!1;c.beforeSubmit=l.beforeSubmit&&"function"==typeof l.beforeSubmit?l.beforeSubmit:function(){a.addClass("wait")},c.success=l.success&&"function"==typeof l.success?l.success:function(n){if(a.removeClass("wait"),n&&n.constructor===Object){var s="message",o=10;n.status?e&&e.statusTrue&&e.statusTrue[r]&&"function"==typeof e.statusTrue[r]&&e.statusTrue[r].call(this,i,t,n):(s="error",o=20,e&&e.statusFalse&&e.statusFalse[r]&&"function"==typeof e.statusFalse[r]&&e.statusFalse[r].call(this,i,t,n));var c=!1;if(n.message)c=n.message;else if(n.messages&&n.messages.length){for(var d="<ul>",u=0,h=n.messages.length;u<h;u++)d+="<li>"+n.messages[u]+"</li>";c=d+="</ul>"}!l.preventUrl&&"url"in n&&"goToUrl"in window?("localStorage"in window&&c&&(localStorage.cmpTrayAlertMessage=c,localStorage.cmpTrayAlertType=s,localStorage.cmpTrayAlertDelay=o),goToUrl(n.url)):l.preventAlert||c&&cmpTrayAlert.show(c,s,o)}else cmpTrayAlert.show(window.translate("message_something_went_wrong","Error"),"error",30)},c.error=function(t){a.removeClass("wait"),t.responseJSON&&t.responseJSON.constructor===Object&&t.responseJSON.message&&cmpTrayAlert.show(t.responseJSON.message,"error",30)},c.cache=l.cache||!1,l.dataType&&(c.dataType=l.dataType),l.data?c.data=l.data:c.data={},l.clearForm&&(c.clearForm=l.clearForm),l.error&&"function"==typeof l.error&&(c.error=l.error),l.resetForm&&(c.resetForm=l.resetForm),l.type&&(c.type=l.type),l.url&&(c.url=l.url),a.data("formClose")&&(c.data.formClose=1),i.ajaxSubmit(c)}}});$.extend($.validator.messages,{required:this.translate("message_field_required","This field is required!"),remote:this.translate("message_fix_this_field","Please fix this field."),email:this.translate("message_enter_valid_email","Please enter a valid email address."),url:this.translate("message_enter_valid_url","Please enter a valid URL."),date:this.translate("message_enter_valid_date","Please enter a valid date."),dateISO:this.translate("message_enter_valid_date_iso","Please enter a valid date (ISO)."),number:this.translate("message_enter_valid_number","Please enter a valid number."),digits:this.translate("message_enter_only_digits","Please enter only digits."),creditcard:this.translate("message_enter_valid_credit_card_number","Please enter a valid credit card number."),equalTo:this.translate("message_enter_same_value_again","Please enter the same value again."),accept:this.translate("message_enter_value_with_valid_extension","Please enter a value with a valid extension."),regex:this.translate("message_enter_valid_value","Please enter a valid value."),imgsize:this.translate("message_select_image_with_dimentions","Please select image with dimentions {0}."),maxlength:$.validator.format(this.translate("message_enter_no_more_than_characters","Please enter no more than {0} characters.")),minlength:$.validator.format(this.translate("message_enter_at_least_characters","Please enter at least {0} characters.")),rangelength:$.validator.format(this.translate("message_enter_value_between_characters_long","Please enter a value between {0} and {1} characters long.")),range:$.validator.format(this.translate("message_enter_value_between","Please enter a value between {0} and {1}.")),max:$.validator.format(this.translate("message_enter_value_less_than_or_equal_to","Please enter a value less than or equal to {0}.")),min:$.validator.format(this.translate("message_enter_value_greater_than_or_equal_to","Please enter a value greater than or equal to {0}."))}),$.validator.addMethod("regex",function(t,e,i){var n=new RegExp(i);return this.optional(e)||n.test(t)},$.validator.messages.regex)}}}},function(t,e,i){"use strict";[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach(function(t){var i=t instanceof Node;e.appendChild(i?t:document.createTextNode(String(t)))}),this.appendChild(e)}})}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var s=arguments[n];if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},writable:!0,configurable:!0})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scaleFix=function(){var t=document.querySelector&&document.querySelector('meta[name="viewport"]'),e=navigator.userAgent,i=function(){t.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"};!function(){if(t&&/iPhone|iPad/.test(e)){var n=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);n&&n.length&&parseInt(n[1])<6&&(t.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",document.addEventListener("gesturestart",i,!1))}}()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.msHeader=void 0;var n,s=i(7),o=(n=s)&&n.__esModule?n:{default:n},a=i(3),r=i(2);var l=e.msHeader={ready:!0,$mainMenu:[],$mainMenuPrime:[],$contentMenu:[],mainMenuSelector:".ms-main-menu",contentMenuSelector:".ms-content-menu",_screenMinWidth:1024,_hasTouch:!!("ontouchstart"in window),_menusResizeStart:!1,_menuResizeMap:new Map,_isDesktop:function(){return(window.innerWidth||document.documentElement.clientWidth)>=this._screenMinWidth&&"desktop"==o.default.type||a.fn.isIpadPro(o.default)},activeDesktopList:function(){var t=null,e=!1,i=this;$(this.mainMenuSelector+","+this.contentMenuSelector).on("mouseenter","> li",function(){i._isDesktop()&&(clearTimeout(t),e||(e=!0,$(this).parent("ul").addClass("active")))}).on("mouseleave","> li",function(){i._isDesktop()&&(t=setTimeout(function(){e=!1,$(this).parent("ul").removeClass("active")},100))}).on("mouseleave",function(){i._isDesktop()&&(e=!1,$(this).removeClass("active"))})},mainMenuTouchItemsToggle:function(){$(this.mainMenuSelector).on("click","li",function(t){var e=$(this);t.stopPropagation(),e.is(".ws")&&(e.hasClass("active")?e.trigger("ms-menu-item-close"):e.trigger("ms-menu-item-open"),e.toggleClass("active"))}),$(this.mainMenuSelector).find("li.current").addClass("active")},menuFreeze:function(t){t.length&&(this._menuResizeMap.set(t,(this._menuResizeMap.get(t)||0)+1),t.addClass("frozen"))},menuUnFreeze:function(t){if(t.length){var e=this._menuResizeMap.get(t)-1;this._menuResizeMap.set(t,e),e>0||t.removeClass("frozen")}},menuReconstruction:function(t,e){if(t.length&&t.is(".visible")){var i=t.find("> li");i.filter(".hidden").removeClass("hidden").addClass("vhidden");var n=i.filter(".current").first();1===e&&(n=n.filter(":not(.section-current)"));var s=i.filter(".section-more").first(),o=0,a=parseInt(t.width()-(s.length?s.width():0)-(n.length?n.width():0)),r=$().add(),l=0,c=":not(.section-more):not(.current)";1===e&&(c+=":not(.section-all):not(.section-current)");var d=0;i.filter(c).each(function(t){var i=$(this),n=parseInt(i.width());if((l+=n)>=a)if(1==e){if(!i.is(".ws"))(s=i.clone(!0,!0).removeClass("vhidden")).find("ul").remove(),r=r.add(s);i.find("> ul > li").each(function(){r=r.add($(this).clone(!0,!0)),d%(document.documentElement.clientWidth/document.documentElement.clientHeight<1?15:10)==0&&o++,d++}),i.addClass("hidden")}else if(3==e){(s=i.clone(!0,!0).removeClass("vhidden")).find("ul").remove(),r=r.add(s),i.addClass("hidden")}else if(2==e){var s;(s=i.clone(!0,!0).removeClass("vhidden")).find("ul").remove(),r=r.add(s),i.find("> ul > li").each(function(){r=r.add($(this).clone(!0,!0))}),i.addClass("hidden")}}),i.removeClass("vhidden"),r.length?s.attr("data-columns",o>4?4:o||1).find(">ul").empty().append(r):s.addClass("hidden").find(">ul").empty()}},menusResize:function(){var t=null,e=this;$(window).on("resize.menusResize",function(){e._isDesktop()?(t?clearTimeout(t):e._menusResizeStart||(e._menusResizeStart=!0,e.menuFreeze(e.$contentMenu),e.menuFreeze(e.$mainMenu),e.menuFreeze(e.$mainMenuPrime)),t=setTimeout(function(){t=null,e._menusResizeStart&&(e.menuReconstruction(e.$contentMenu,2),e.menuReconstruction(e.$mainMenu,1),e.menuReconstruction(e.$mainMenuPrime,3)),e.menuUnFreeze(e.$contentMenu),e.menuUnFreeze(e.$mainMenu),e.menuUnFreeze(e.$mainMenuPrime),e._menusResizeStart=!1},200)):e._menusResizeStart=!1})},headerStick:function(){var t=$("#layout_header_spacer"),e=0,i=0,n=0,s=0,o=null,a=null;window.headerStickEver=!1;$.cookie("cookie_accept");var l=this,c=document.body,d=document.documentElement,u=$("body"),h=$(window),f=$(".ms-footer"),p=40,m=40,g=40,v=function(){var t=0;return t=document.body.scrollHeight-f.height()-window.innerHeight,window.innerWidth>=1280?t+=g:window.innerWidth<1280&&window.innerWidth>=768?t+=m:t+=p,t},y=v();h.on("scroll",(0,r.throttle)(500,function(){y=v()})),u.is(".ms-layout-header-stick")&&(window.headerStickEver=!0),h.on("scroll.headerStick",function(){if(!(e>120&&0!==window.msSilentScrollIssuers)){var r=Math.max(c.scrollHeight,c.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight),p=t.offset().top,m=Math.min(window.scrollY||window.pageYOffset||0,r-window.innerHeight);m>p?(0==n&&(window.headerStickEver||u.addClass("ms-layout-header-stick")),n=1,0==i&&1==n&&0==s&&m>p+120&&(clearTimeout(a),a=setTimeout(function(){o?clearTimeout(o):l.menuFreeze(l.$contentMenu),o=setTimeout(function(){o=null,l.menuReconstruction(l.$contentMenu,2),l.menuUnFreeze(l.$contentMenu),h.trigger("ms-header:collapse")},300),s=1},300))):(1==n&&(clearTimeout(a),window.headerStickEver||setTimeout(function(){window.headerStickEver||u.removeClass("ms-layout-header-stick")},0),o?clearTimeout(o):l.menuFreeze(l.$contentMenu),o=setTimeout(function(){o=null,l.menuReconstruction(l.$contentMenu,2),l.menuUnFreeze(l.$contentMenu),h.trigger("ms-header:expand")},400),s=0),n=0),m<y&&1===i?(f.addClass("ms-footer--stick"),u.addClass("ms-footer--stick")):(f.removeClass("ms-footer--stick"),u.removeClass("ms-footer--stick")),e>m?(0==i&&(h.trigger("ms-footer:stick"),u.trigger("ms-layout-footer-stick-on"),1==n&&1==s&&m>p+120&&(clearTimeout(a),o?clearTimeout(o):l.menuFreeze(l.$contentMenu),o=setTimeout(function(){o=null,l.menuReconstruction(l.$contentMenu,2),l.menuUnFreeze(l.$contentMenu),h.trigger("ms-header:expand")},400),s=0)),i=1):e<m&&(1==i&&(h.trigger("ms-footer:unstick"),u.trigger("ms-layout-footer-stick-off")),i=0),e=m}})},mainMenuReconstruction:function(){this.menuFreeze(this.$mainMenu),this.menuReconstruction(this.$mainMenu,1),this.menuUnFreeze(this.$mainMenu)},mainMenuPrimeReconstruction:function(){this.menuFreeze(this.$mainMenuPrime),this.menuReconstruction(this.$mainMenuPrime,3),this.menuUnFreeze(this.$mainMenuPrime)},contentMenuReconstruction:function(){this.menuFreeze(this.$contentMenu),this.menuReconstruction(this.$contentMenu,2),this.menuUnFreeze(this.$contentMenu)},init:function(){if(l.ready){var t=window.scrollY||window.pageYOffset||0;this.$mainMenu=$(this.mainMenuSelector+".default"),this.$mainMenuPrime=$(this.mainMenuSelector+".prime"),this.$contentMenu=$(this.contentMenuSelector),"/"===location.pathname?$(this.mainMenuSelector).find(".section-all").addClass("current active"):$(this.mainMenuSelector).find(".current").addClass("active"),this.mainMenuReconstruction(),this.mainMenuPrimeReconstruction(),this.contentMenuReconstruction(),this.menusResize(),this.headerStick(),t&&$(window).trigger("scroll.headerStick"),this.activeDesktopList(),this.mainMenuTouchItemsToggle(),$(".ms-search-panel-input").on("click",function(t){t.stopPropagation()})}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.advFn={banners:function(t){if(window.bannerContainerReference="","gtmDataLayer"in window){var e={event:"bannersRender"};if(t&&(e.bannersContainerSelector=t,"object"==(void 0===t?"undefined":n(t)))){var i=fn.getJQSelector(t);e.bannersContainerSelector=i.length?i:"",window.bannerContainerReference=t.length?t:""}gtmDataLayer.push(e)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var cmpBubbles=exports.cmpBubbles={config:{selector:"body",error:!1,ajaxGlobal:!0,minWidth:0},init:function(t){if(t&&t.constructor===Object)for(var e in t)this.config[e]=t[e];return this.listener(),this},options:{},groupName:!1,$element:[],$target:[],posX:0,posY:0,active:!1,timeout:null,hidetimeout:0,listener:function(){var t=this;$(document).on("touchstart scroll",function(e){t.config.minWidth&&document.documentElement.clientWidth<t.config.minWidth||t.active&&$("[data-bubbles].active").trigger("mouseleave")}),$(this.config.selector).on("mousemove","[data-bubbles]",function(e){if(!(t.config.minWidth&&document.documentElement.clientWidth<t.config.minWidth)){t.getPosition.call(t,e);var i=$(this).data();"move"in i&&!1!==i.move?t.setPosition.call(t):e.target==this&&(t.hidetimeout>=15?($(this).trigger("mouseleave"),t.hidetimeout=0):t.hidetimeout++)}}).on("mouseenter touchstart mousedown","[data-bubbles-target]",function(t){t.stopPropagation()}).on("mouseenter.bubbles touchstart.bubbles mousedown.bubbles","[data-bubbles]",function(e){if(!(t.config.minWidth&&document.documentElement.clientWidth<t.config.minWidth)){e.preventDefault(),t.hidetimeout=0;var i=0;"touchstart"==e.type&&(t.active&&$("[data-bubbles].active").trigger("mouseleave"),$(t.config.selector).off("mousedown.bubbles")),t.active=!0;var n=$(this),s=n.data(),o=s.bubbles||!1;if(!n.is(".disabled")&&!n.is(".wait")){if(s.propagation||e.stopPropagation(),o){if(o!=t.groupName){t.groupName=o,t.options={};var a=t.$getGroup(o);a.length&&a.each(function(){t.setOptions($(this).data())})}}else t.groupName=!1,t.options={},t.setOptions(s);"mouseenter"==e.type&&(i=null==t.options.delay?300:t.options.delay?1e3*t.options.delay:0),s.extraParams?s.extraParams.constructor===Object?t.options.extraParams=s.extraParams:t.options.extraParams=t.extraParamsParse(s.extraParams):t.options.extraParams&&delete t.options.extraParams,void 0!==s.value?t.options.value=s.value:t.options.value&&delete t.options.value,void 0!==s.viewCache?t.options.viewCache=s.viewCache:t.options.viewCache&&delete t.options.viewCache,void 0!==s.title?t.options.title=s.title:t.options.title&&delete t.options.title,t.$element=n,t.$target=t.$getTarget(n);var r=this;clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.options.url?t.options.viewCache?t.success(s,r):t.request(s,r):t.success(s,r)},i),t.getPosition.call(t,e)}}}).on("mouseleave","[data-bubbles]",function(e){t.config.minWidth&&document.documentElement.clientWidth<t.config.minWidth||(clearTimeout(t.timeout),t.hide(),t.$target.length&&t.$target.removeAttr("style"),t.$element=[],t.$target=[],t.active=!1)})},extraParamsParse:function extraParamsParse(params){return!!params&&(params.indexOf("{")<0&&(params="{"+params+"}"),eval("("+params+")"))},request:function(t,e){var i=this,n=this.options,s={},o=$(e);n.extraParams&&n.extraParams.constructor===Object&&(s=n.extraParams),void 0!==this.options.value&&(n.name?s[n.name]=this.options.value:s.value=this.options.value);var a={dataType:"json",url:n.url,cache:void 0===n.cache||n.cache,data:s,type:n.method||"GET",global:i.config.ajaxGlobal,beforeSend:function(n,s){o.addClass("wait");var a=i.beforeSend.call(i,t,e,n,s);return!1===a&&o.removeClass("wait"),a},success:function(s,a,r){o.removeClass("wait"),s&&s.constructor===Object?(i.success.call(i,t,e,s.status,s,a,r),null==n.viewCache&&!0===s.status&&o.data("view-cache",!0)):i.error.call(i,t,e,s,a,r)},error:function(n,s){o.removeClass("wait"),i.error.call(i,t,e,{},s,n)}};$.ajax(a)},error:function(t,e,i,n,s){this.config.error&&"function"==typeof this.config.error&&this.config.error.call(this,t,e,i,n,s)},beforeSend:function(t,e,i,n){this.config.beforeSend&&"function"==typeof this.config.beforeSend&&this.config.beforeSend.call(this,t,e,i,n)},getPosition:function(t){if("touchstart"==t.type){var e=t.originalEvent.changedTouches[0];this.posX=e.pageX-window.pageXOffset,this.posY=e.pageY-window.pageYOffset}else this.posX=t.pageX-window.pageXOffset,this.posY=t.pageY-window.pageYOffset},setPosition:function(){if(this.$target.length){var t=this.$target[0].getBoundingClientRect(),e=document.documentElement.clientWidth,i=document.documentElement.clientHeight,n=this.posY+1,s=this.posX+1;this.$target.attr("data-pos",1),this.posY+t.height>i&&(n=this.posY-this.$target.outerHeight()-1,this.$target.attr("data-pos",3)),this.posX+t.width>e&&(s=this.posX-this.$target.outerWidth()-1,this.$target.attr("data-pos",2)),this.posY+t.height>i&&this.posX+t.width>e&&this.$target.attr("data-pos",4),this.$target.css("top",n+"px"),this.$target.css("left",s+"px")}},show:function(){if(this.active){var t=this;this.$element.length&&this.$element.addClass("active"),this.$target.length&&(this.$target.removeClass("disabled").addClass("enabled"),setTimeout(function(){t.$target.length&&t.$target.addClass("show")},1))}},hide:function(){this.$element.length&&this.$element.removeClass("active"),this.$target.length&&this.$target.removeClass("enabled show").addClass("disabled")},build:function(t,e){this.$target=$('<span data-bubbles-target class="disabled"></span>').html('<span class="bubbles-box">'+e+"</span>").appendTo(t)},success:function(t,e,i,n,s,o){if(!1!==i){var a=n&&n.html?n.html:t.title||"";!this.$target.length&&a&&(this.$target=this.$getTarget($(e)),this.$target.length||this.build.call(this,e,a)),this.setPosition.call(this),this.show.call(this)}else this.hide.call(this)},setOptions:function(t){for(var e in t)e in this.options||"value"==e||"extraParams"==e||"viewCache"==e||(this.options[e]=t[e])},$getGroup:function(t,e){return $('[data-bubbles="'+t+'"]',e||document.body)},$getTarget:function(t){return t.find("[data-bubbles-target]")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cmpButtonsToggle=void 0;var n=i(4),s=e.cmpButtonsToggle={config:{object:n.cmpButtons||!1,disabledClassName:"disabled",activeClassName:"active"},init:function(t){if(this.config.object.constructor===Object){if(t&&t.constructor===Object)for(var e in t)this.config[e]=t[e];this.addMethods(),this.setDefault()}return this},addMethods:function(){this.config.object.toggleButtons=this.toggleButtons},setDefault:function(){$("[data-default]",document.body).each(function(t,e){var i=$(e);void 0===$.cookie(i.data("button"))&&("mobile"!=i.data("default")||isDesktop||i.trigger("click"))})},toggleButtons:function(t,e){var i=s;if(this.groupName){var n=this.$getGroup(this.groupName),o=[];if(n.length){if(t){if(o=$(t),e&&void 0!==e.multiGroupToggle){var a=o.parent();a.length&&(n=this.$getGroup(this.groupName,a))}}else o=n.filter("."+i.config.activeClassName).first();if(o.length){var r,l=[];"index"in this.options?(null==(r=o.data("index"))&&(r=n.index(o)),null!=r&&((l=n.filter('[data-index="'+(r+1)+'"]').first()).length||(l=r==n.length-1?n.first():o.next('[data-button="'+this.groupName+'"]')))):l=o.next('[data-button="'+this.groupName+'"]'),l.length||(l=n.first()),l.length&&(o.removeClass(i.config.activeClassName),n.addClass(i.config.disabledClassName),l.removeClass(i.config.disabledClassName).addClass(i.config.activeClassName))}}}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.formsConfig={config:{},statusFalse:{},statusTrue:{},ready:!0,init:function(){n.ready}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={init:function(t){if((t=$.extend({selector:null,config:!1,itemSelector:".spot-im-replies-count",valueSelector:null,minCount:1},t)).config&&t.config.constructor===Object&&t.config.active){var e=t.config;"spotim"==e.type?this.spotimInit(t):e.type}},spotimInit:function(t){var e=t.config.spot_id;if(e){var i=$([]);if((i=t.selector?$(t.selector).find(t.itemSelector).not('[data-comments-ready="1"]'):$(t.itemSelector).not('[data-comments-ready="1"]')).length){var n=[];if(i.each(function(){n.push($(this).data("postId"))}),n.length){var s=n.join(",");$.ajax("https://open-api.spot.im/v1/messages-count?spot_id="+e+"&posts_ids="+s).done(function(e){e&&e.constructor===Object&&e.messages_count&&i.each(function(){var i=$(this),n=i.data();if(n.postId in e.messages_count){var s=e.messages_count[n.postId]>=t.minCount?e.messages_count[n.postId]:"";t.valueSelector?i.find(t.valueSelector).html(s):i.html(s),s&&i.addClass("not-empty")}i.attr("data-comments-ready","1")})})}}}},disqusInit:function(t){"DISQUSWIDGETS"in window&&DISQUSWIDGETS.getCount&&"function"==typeof DISQUSWIDGETS.getCount?DISQUSWIDGETS.getCount({reset:!0}):(window.disqus_shortname=t.shortname,this.getScript("//"+t.shortname+".disqus.com/count.js"))},getScript:function(t,e){$.ajax({type:"GET",url:t,success:e,dataType:"script",cache:!0})}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={xmlRpcProfiler:function(t,e,i){var n=$("#"+t.connection+"Detail");cmpDialog.content(n.html(),null,null,"profiler",function(){var t=this.$contayner.find(".content");t.on("click",".copy-raw",function(t){t.stopPropagation(),$(this).find("textarea").select();try{var e=document.execCommand("copy"),i="Copying text command was "+(e?"successful":"unsuccessful");cmpTrayAlert.show(i,e?"message":"error",e?null:5)}catch(t){cmpTrayAlert.show("Cannot write to clipboard","error",5)}}),t.on("click","h3",function(){var t=$(this);t.parent().toggleClass("open"),t.next().slideToggle()})})}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2);i(24),i(3),e.default={init:function(t){this.options=$.extend({context:null,breakpoint:768},t),$(document.body).msDropdown(),this.$eventStrip=$(".ms-event-strip-widget",this.options.context),this.$seriesSelect=this.$eventStrip.find(".ms-event-strip-widget-series-select"),this.$slider=this.$eventStrip.find(".ms-event-strip-widget-wrapper"),this.$sliderScroller=this.$slider.find(".ms-event-strip-widget-scroll"),this.isMozilla=$(document.body).data("edtn-rtl")&&"Firefox"===fn.getBrowser(),this.$titleEl=this.$seriesSelect.find(".ms-dropdown_title"),this.initEvents(),this.initSeriesSelect()},scrollContent:function(t,e){if(!this.animated){var i=this.$sliderScroller.scrollLeft()+.6*this.$sliderScroller.outerWidth()*("prev"===t?-1:1);this.animated=!0,this.scrollTo(i)}},scrollTo:function(t){var e=this;this.$sliderScroller.animate({scrollLeft:t},300,function(t){e.animated=!1})},updateSliderState:function(t){if(!(window.innerWidth<this.options.breakpoint)){var e=this.$sliderScroller.scrollLeft(),i=this.$sliderScroller.outerWidth(),n=this.$sliderScroller[0].scrollWidth;i<n&&this.$slider.addClass("show-nav");var s=this.isMozilla?-1*Math.floor(n-i):0,o=this.isMozilla?0:Math.floor(n-i);e>s?this.$slider.removeClass("at-the-start"):this.$slider.addClass("at-the-start"),e>=o?this.$slider.addClass("at-the-end"):this.$slider.removeClass("at-the-end")}},initEvents:function(){var t=this;this.$slider.on("click",".ms-event-strip-widget-control--prev",function(e){e.stopPropagation(),t.scrollContent("prev",e)}).on("click",".ms-event-strip-widget-control--next",function(e){e.stopPropagation(),t.scrollContent("next",e)}),this.$sliderScroller.on("scroll",(0,n.throttle)(10,this.updateSliderState.bind(this))).trigger("scroll"),$(window).on("resize",(0,n.throttle)(10,function(e){t.$sliderScroller.trigger("scroll")})),this.scrollToActive()},initSeriesSelect:function(){this.$seriesSelect.on("click","a",this.processSeriesChange.bind(this)),this.$sliderScroller.on("click",".ms-event-strip-series",this.processSeriesChange.bind(this))},processSeriesChange:function(t){var e=this;t.preventDefault();var i=$(t.currentTarget),n=i.data("series");this.$titleEl.text(i.text()),$.get("/"+n+"/event/event-strip/",function(t){if(t.status){var i=$(t.html);e.$sliderScroller.html(i.find(".ms-event-strip-widget-scroll").html()),"all"==n&&e.scrollTo(0)||e.scrollToActive(),e.$sliderScroller.trigger("scroll"),e.options.onRefresh&&"function"==typeof e.options.onRefresh&&e.options.onRefresh.call(e)}})},scrollToActive:function(){var t=this.$eventStrip.find(".ms-event-strip-item--active").prev();return!!t.length&&(this.scrollTo(t.position().left-this.$slider.find(".ms-event-strip-widget-control").width()),!0)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){l[t]&&"function"==typeof l[t]&&l[t](e)};var n,s=i(40),o=i(14),a=(n=o)&&n.__esModule?n:{default:n},r=i(9);i(41);var l={results:function(t){new s.RaceTypeDropdown({container:t})},standings:function(t){new s.RaceTypeDropdown({container:t})},raceHub:function(t){new s.RaceTypeDropdown({container:t,method:"post",init:function(){(0,a.default)(this.getContainer().find(".ms-schedule-item-countdown"))},after:function(){(0,a.default)(this.getContainer().find(".ms-schedule-item-countdown")),(0,r.initDateFields)(t)}})},raceCenter:function(t){new s.RaceTypeDropdown({container:t,content:t.find("> .ms-item-widget-content"),method:"post",init:function(){(0,a.default)(this.getContainer().find(".ms-schedule-item-countdown"))},after:function(){(0,a.default)(this.getContainer().find(".ms-schedule-item-countdown")),(0,r.initDateFields)(t)}})},newsOpinionAnalysis:function(t){new s.RaceTypeDropdown({container:t,method:"post",data:{widget_alias:"news_opinion_analysis"},handleResponse:function(e){var i=$(e.html).find(".ms-entity-table--motorsport");t.find(".ms-entity-table--motorsport").replaceWith(i)}})},schedule:function(t){new s.RaceTypeDropdown({container:t,method:"post"})},testing:function(t){new s.RaceTypeDropdown({container:t})},preseason:function(t){new s.RaceTypeDropdown({container:t})}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.RaceTypeDropdown=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend({container:null,content:".ms-side-widget-content",method:null,data:null,init:null,before:null,after:null,handleResponse:null},e),this.$container=$(this.options.container),this.$container.length&&(this.$container.data("init")||(this.$container.data("init",!0),"post"!==this.options.method&&(this.options.method="get"),this.$wrapper=this.$container.find(".ms-race-type_dropdown-wrapper"),this.$dropdown=this.$container.find(".ms-race-type_dropdown"),this.$dropdownItems=this.$dropdown.find(".ms-race-type_dropdown-item"),this.$dropdownCurrent=this.$dropdown.find(".ms-race-type_dropdown-current"),this.$content=this.$container.find(this.options.content),this.$dropdownItems.on("click",this.__change.bind(this)),this.$dropdownCurrent.on("click",function(){i.$dropdown.hasClass("active")?i.__close():i.$dropdown.addClass("active")}),this.$dropdown.on("focusout blur",function(){i.__close()}),this.$wrapper.on("transitionend",function(t){"max-height"===t.originalEvent.propertyName&&i.$dropdown.hasClass("active")&&$(t.currentTarget).find(".ms-scrollbar").css("overflow-y","auto")}),this.options.init&&"function"==typeof this.options.init&&this.options.init.call(this)))}return n(t,[{key:"getContainer",value:function(){return this.$container}},{key:"__change",value:function(t){var e=this,i=$(t.currentTarget);if(!i.hasClass("current")){if(this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),!i.data("href")){var n=i.data("id");if(n)return this.$content.find("[data-race-type]").addClass("hidden"),this.$content.find('[data-race-type="'+n+'"]').removeClass("hidden"),this.$dropdownCurrent.find(".ms-race-type_dropdown-current-text").text(i.text()),this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),void this.__close()}$.ajax({url:i.data("href"),method:this.options.method,dataType:"json",data:this.options.data}).done(function(t){t&&(t.message&&(t.html=t.message),(t.status||t.html)&&("function"==typeof e.options.handleResponse?e.options.handleResponse(t):e.$content.html(t.html),e.$dropdownCurrent.find(".ms-race-type_dropdown-current-text").text(i.text()),e.options.after&&"function"==typeof e.options.after&&e.options.after.call(e),e.__close()))})}}},{key:"__close",value:function(){this.$dropdown.removeClass("active"),this.$wrapper.find(".ms-scrollbar").css("overflow-y","hidden")}}]),t}()},function(t,e,i){"use strict";var n,s=i(5);((n=s)&&n.__esModule?n:{default:n}).default.tabs=function(t,e,i){var n=$(e);if(!n.hasClass("current")){t.hash&&(window.location.hash=t.target);for(var s=$([]),o=n.parent();!s.length&&o.length;)s=o.find("."+t.target),o=o.parent();o.find(".current").removeClass("current"),n.addClass("current"),s.addClass("current")}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sendUserGTM=function(){var t=n.$.cookie(s);t&&"gtmDataLayer"in window&&(gtmDataLayer.push({event:t}),n.$.removeCookie(s))};var n=i(1),s="cec"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={adSkinsFlags:{phone:!0,pad:!0,desktop:!0},init:function(){$(document.body).on("click",".ms-skin-click[data-ms-skin-url]",function(t){t.preventDefault(),t.stopPropagation();var e=$(this).data();e.msSkinUrl&&window.open(e.msSkinUrl,e.msSkinTarget||"_blank")})},colorOutput:function(t,e,i,n,s){return"\n        @media only screen "+(e?" and (min-width: "+e+"px)":"")+" "+(i?" and (max-width: "+i+"px)":"")+"{\n            .ms-ad-skin-"+t+" .ms-skin-color-"+n+",\n            .ms-ad-skin-"+t+" .ms-skin-color-"+n+"-links a{\n                color:"+s+";\n            }\n            .ms-ad-skin-"+t+" .ms-skin-bgcolor-"+n+"{\n                background-color:"+s+";\n            }\n        }"},bgColorOutput:function(t,e,i,n,s){return"\n        @media only screen "+(i?" and (min-width: "+i+"px)":"")+" "+(n?" and (max-width: "+n+"px)":"")+"{\n            .ms-ad-skin-"+t+" "+e+"{\n                background-color: "+s+";\n            }\n        }        \n    "},heightOutput:function(t,e,i,n,s,o,a){return"@media only screen "+(i?" and (min-width: "+i+"px)":"")+" "+(n?" and (max-width: "+n+"px)":"")+" "+(s?" and (orientation: "+s+")":"")+" {\n            .ms-ad-skin-"+t+" "+e+"{\n                padding-bottom:"+o+a+"!important;\n            }\n        }"},imageOutput:function(t,e,i,n,s,o,a){var r=i?" and (min-width: "+i+"px)":"",l=n?" and (max-width: "+n+"px)":"",c=s?" and (orientation: "+s+")":"",d="\n        @media only screen "+r+" "+l+" "+c;return a&&(d+="\n         and (-webkit-min-device-pixel-ratio : 2),\n        only screen "+r+" "+l+" "+c+" and (min-device-pixel-ratio : 2),\n        only screen "+r+" "+l+" "+c+" and (min--moz-device-pixel-ratio : 2)"),d+="{\n            .ms-ad-skin-"+t+(s?"-"+s:"")+" "+e+"{\n                background-image: url("+o+");\n            }\n        }"},adSkinsInit:function(t){if(t&&"object"==(void 0===t?"undefined":n(t))){var e="",i="ms-ad-skin",s=window.innerWidth||document.documentElement.clientWidth;if(e+='<style type="text/css">',s<768&&(t.IMAGE_PT||t.IMAGE_PT_X2||t.IMAGE_LS||t.IMAGE_LS_X2)){if(!this.adSkinsFlags.phone)return;var o=".ms-skin-front .ms-apb-mleaderboard";if(t.BACKGROUND_COLOR&&(e+=this.bgColorOutput("phone",o,null,767,t.BACKGROUND_COLOR)),t.IMAGE_PT&&(e+=this.imageOutput("phone",o,null,767,"portrait",t.IMAGE_PT)),t.IMAGE_PT_X2&&(e+=this.imageOutput("phone",o,null,767,"portrait",t.IMAGE_PT_X2,!0)),t.HEIGHT_PT&&(e+=this.heightOutput("phone",o,null,767,"portrait",t.HEIGHT_PT,"%")),(t.IMAGE_PT||t.IMAGE_PT_X2)&&(i+=" ms-ad-skin-phone-portrait"),t.IMAGE_LS&&(e+=this.imageOutput("phone",o,null,767,"landscape",t.IMAGE_LS)),t.IMAGE_LS_X2&&(e+=this.imageOutput("phone",o,null,767,"landscape",t.IMAGE_LS_X2,!0)),t.HEIGHT_LS&&(e+=this.heightOutput("phone",o,null,767,"landscape",t.HEIGHT_LS,"%")),(t.IMAGE_LS||t.IMAGE_LS_X2)&&(i+=" ms-ad-skin-phone-landscape"),t.COLOR_PRIMARY&&(e+=this.colorOutput("phone",null,767,"primary",t.COLOR_PRIMARY)),t.COLOR_SECONDARY&&(e+=this.colorOutput("phone",null,767,"secondary",t.COLOR_SECONDARY)),t.COLOR_ACCENT&&(e+=this.colorOutput("phone",null,767,"accent",t.COLOR_ACCENT)),t.CLICK_URL)(r=$(".ms-skin-front .ms-apb-mleaderboard.ms-skin-click")).attr("data-ms-skin-url",t.CLICK_URL),t.CLICK_URL_TARGET&&r.attr("data-ms-skin-target",t.CLICK_URL_TARGET);i+=" ms-ad-skin-phone",this.adSkinsFlags.phone=!1}if(s>=768&&s<=1024&&(t.IMAGE_PT||t.IMAGE_PT_X2||t.IMAGE_LS||t.IMAGE_LS_X2)){if(!this.adSkinsFlags.pad)return;var a=".ms-skin-front .ms-apb-leaderboard";if(t.BACKGROUND_COLOR&&(e+=this.bgColorOutput("pad",a,768,1024,t.BACKGROUND_COLOR)),t.IMAGE_PT&&(e+=this.imageOutput("pad",a,768,1024,"portrait",t.IMAGE_PT)),t.IMAGE_PT_X2&&(e+=this.imageOutput("pad",a,768,1024,"portrait",t.IMAGE_PT_X2,!0)),t.HEIGHT_PT&&(e+=this.heightOutput("pad",a,768,1024,"portrait",t.HEIGHT_PT,"%")),(t.IMAGE_PT||t.IMAGE_PT_X2)&&(i+=" ms-ad-skin-pad-portrait"),t.IMAGE_LS&&(e+=this.imageOutput("pad",a,768,1024,"landscape",t.IMAGE_LS)),t.IMAGE_LS_X2&&(e+=this.imageOutput("pad",a,768,1024,"landscape",t.IMAGE_LS_X2,!0)),t.HEIGHT_LS&&(e+=this.heightOutput("pad",a,768,1024,"landscape",t.HEIGHT_LS,"%")),(t.IMAGE_LS||t.IMAGE_LS_X2)&&(i+=" ms-ad-skin-pad-landscape"),t.COLOR_PRIMARY&&(e+=this.colorOutput("pad",768,1024,"primary",t.COLOR_PRIMARY)),t.COLOR_SECONDARY&&(e+=this.colorOutput("pad",768,1024,"secondary",t.COLOR_SECONDARY)),t.COLOR_ACCENT&&(e+=this.colorOutput("pad",768,1024,"accent",t.COLOR_ACCENT)),t.CLICK_URL)(r=$(".ms-skin-front .ms-apb-leaderboard.ms-skin-click")).attr("data-ms-skin-url",t.CLICK_URL),t.CLICK_URL_TARGET&&r.attr("data-ms-skin-target",t.CLICK_URL_TARGET);i+=" ms-ad-skin-pad",this.adSkinsFlags.pad=!1}if(s>=1025&&t.IMAGE){if(!this.adSkinsFlags.desktop)return;var r;if(t.BACKGROUND_COLOR&&(e+=this.bgColorOutput("desktop",".ms-skin-super-poster",1025,null,t.BACKGROUND_COLOR)),t.IMAGE&&(e+=this.imageOutput("desktop",".ms-skin-super-poster",1025,null,null,t.IMAGE)),t.HEIGHT&&(e+=this.heightOutput("desktop",".ms-skin-front .ms-apb-super",1025,null,null,t.HEIGHT,"px")),t.COLOR_PRIMARY&&(e+=this.colorOutput("desktop",1025,null,"primary",t.COLOR_PRIMARY)),t.COLOR_SECONDARY&&(e+=this.colorOutput("desktop",1025,null,"secondary",t.COLOR_SECONDARY)),t.COLOR_ACCENT&&(e+=this.colorOutput("desktop",1025,null,"accent",t.COLOR_ACCENT)),e+="}",i+=" ms-ad-skin-desktop",!1!==t.BACKGROUND_FIXED&&(i+=" ms-ad-skin-fixed"),!1===t.BACKGROUND_FIXED&&t.BACKGROUND_REPEAT&&(i+=" ms-ad-skin-repeat"),t.CLICK_URL)(r=$(".ms-skin-front .ms-apb-super.ms-skin-click, .ms-skin-super-poster.ms-skin-click")).attr("data-ms-skin-url",t.CLICK_URL),t.CLICK_URL_TARGET&&r.attr("data-ms-skin-target",t.CLICK_URL_TARGET);$(document.body).removeClass("ms-fullwidth-layout"),this.adSkinsFlags.desktop=!1}if(e+="</style>",i){var l=$(document.body);l.addClass(i),setTimeout(function(){l.addClass("ms-ad-skin-animation")},100),l.append(e),$(document.documentElement).trigger("ms-ad-skin-init")}}},adSkins:function(t){try{this.adSkinsInit(t)}catch(t){"console"in window&&console.log("Skin init: "+t)}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default={$toaster:!1,createToaster:function(){var t=$('<div class="ms-adv-toaster" data-toaster></div>').appendTo(document.body);return $(document.body).on("ms-layout-header-short-on",function(){t.attr("data-toaster",1)}).on("ms-layout-footer-stick-on",function(){t.attr("data-toaster",0)}).on("ms-layout-footer-stick-off",function(){t.attr("data-toaster",1)}),t.on("mouseenter",function(){t.attr("data-toaster",0)}),t},adToasterInit:function(t){if(t&&"object"==(void 0===t?"undefined":n(t))){var e=function(t,e,i,n,s){var o=[];return t.IMAGE&&(o.push('<div class="ms-adv-toaster-images-box '+e+'">'),o.push('<a class="ms-adv-toaster-image-box" target="'+(t.CLICK_URL_TARGET||"_blank")+'" '+(t.CLICK_URL?'href="'+t.CLICK_URL+'"':"")+' style="background:'+(t.BACKGROUND_COLOR||"transparent")+';">'),t.BACKGROUND_COLOR_2&&o.push('<span class="ms-adv-toaster-image-bg2" style="background:'+t.BACKGROUND_COLOR_2+';"></span>'),o.push('<span class="ms-adv-toaster-image-wrapper" style="width:'+i+"px;height:"+(s&&t.HEIGHT_SMALL?t.HEIGHT_SMALL:t.HEIGHT?t.HEIGHT:n)+'px;">'),o.push('<span class="ms-adv-toaster-image" style="background-image:url('+(s?t.IMAGE_SMALL:t.IMAGE)+');"></span>'),t.IMAGE_X2&&o.push('<span class="ms-adv-toaster-image-x2" style="background-image:url('+(s?t.IMAGE_SMALL_X2:t.IMAGE_X2)+');"></span>'),o.push("</span>"),o.push("</a>"),o.push("</div>")),o},i=[],s=[];t.PHONE&&(i=i.concat(e(t.PHONE,"phone",320,90)),s=s.concat(e(t.PHONE,"phone",320,40,1))),t.PAD&&(i=i.concat(e(t.PAD,"pad",728,90)),s=s.concat(e(t.PAD,"pad",728,40,1))),t.DESKTOP&&(i=i.concat(e(t.DESKTOP,"desktop",970,90)),s=s.concat(e(t.DESKTOP,"desktop",970,40,1))),this.$toaster?this.$toaster.length&&this.$toaster.empty():this.$toaster=this.createToaster();var o=this;if(i.length){var a=$('<div class="ms-adv-toaster-box big">'+i.join("")+'<span class="ms-adv-toaster-button-close"></span></div>').appendTo(this.$toaster);setTimeout(function(){o.$toaster.attr("data-toaster",0)},100),a.find(".ms-adv-toaster-button-close").on("click",function(){o.$toaster.remove(),o.$toaster=!1})}if(s.length){var r=$('<div class="ms-adv-toaster-box small">'+s.join("")+'<span class="ms-adv-toaster-button-close"></span></div>').appendTo(this.$toaster);r.on("mouseenter",function(){o.$toaster.attr("data-toaster",0)}),r.find(".ms-adv-toaster-button-close").on("click",function(){o.$toaster.remove(),o.$toaster=!1})}}},adToaster:function(t){try{this.adToasterInit(t)}catch(t){"console"in window&&console.log("Toaster init: "+t)}}}},function(t,e,i){"use strict";var n,s,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};s=[i(0)],void 0===(o="function"==typeof(n=function(t){var e=navigator.userAgent,i=/Edge/i.test(e),n=function(n){this.origHtmlMargin=parseFloat(t("html").css("margin-top")),this.options=t.extend({},t.smartbanner.defaults,n);var s=navigator.standalone;if(this.options.force?this.type=this.options.force:null!==e.match(/Windows Phone/i)&&null!==e.match(/Edge|Touch/i)?this.type="windows":null!==e.match(/iPhone|iPod/i)||e.match(/iPad/)&&this.options.iOSUniversalApp?null!==e.match(/Safari/i)&&(null!==e.match(/CriOS/i)||null!=e.match(/FxiOS/i)||window.Number(e.substr(e.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):e.match(/\bSilk\/(.*\bMobile Safari\b)?/)||e.match(/\bKF\w/)||e.match("Kindle Fire")?this.type="kindle":null!==e.match(/Android/i)&&(this.type="android"),this.type&&!s&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?t(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var o=t("android"==this.type?'meta[name="google-play-app"]':"ios"==this.type?'meta[name="apple-itunes-app"]':"kindle"==this.type?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(o.length){if("windows"==this.type)i&&(this.appId=t('meta[name="msApplication-PackageEdgeName"]').attr("content")),this.appId||(this.appId=t('meta[name="msApplication-PackageFamilyName"]').attr("content"));else{var a=/app-id=([^\s,]+)/.exec(o.attr("content"));if(!a)return;this.appId=a[1]}this.title=this.options.title?this.options.title:o.data("title")||t("title").text().replace(/\s*[|\-].*$/,""),this.author=this.options.author?this.options.author:o.data("author")||(t('meta[name="author"]').length?t('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=o.data("icon-url"),this.price=o.data("price"),this.params=o.data("params"),"function"==typeof this.options.onInstall?this.options.onInstall=this.options.onInstall:this.options.onInstall=function(){},"function"==typeof this.options.onClose?this.options.onClose=this.options.onClose:this.options.onClose=function(){},this.create(),this.show(),this.listen()}}};n.prototype={constructor:n,create:function(){var e,n=this.price||this.options.price,s=this.options.url||function(){switch(this.type){case"android":return"market://details?id=";case"kindle":return"amzn://apps/android?asin=";case"windows":return i?"ms-windows-store://pdp/?productid=":"ms-windows-store:navigate?appid="}return"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"}.call(this)+this.appId,o=n?function(){var t=n+" - ";switch(this.type){case"android":return t+this.options.inGooglePlay;case"kindle":return t+this.options.inAmazonAppStore;case"windows":return t+this.options.inWindowsStore}return t+this.options.inAppStore}.call(this):"",a=null==this.options.iconGloss?"ios"==this.type:this.options.iconGloss;"android"==this.type&&this.params&&(s+="&"+this.params),"ios"==this.type&&this.params&&(s+="?"+this.params);var r='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><div class="sb-container--left"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+o+'</span></div></div><div class="sb-container--right"><a href="'+s+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div></div>";this.options.layer?t(this.options.appendToSelector).append(r):t(this.options.appendToSelector).prepend(r),this.options.icon?e=this.options.icon:this.iconUrl?e=this.iconUrl:t('link[rel="apple-touch-icon-precomposed"]').length>0?(e=t('link[rel="apple-touch-icon-precomposed"]').attr("href"),null==this.options.iconGloss&&(a=!1)):t('link[rel="apple-touch-icon"]').length>0?e=t('link[rel="apple-touch-icon"]').attr("href"):t('meta[name="msApplication-TileImage"]').length>0?e=t('meta[name="msApplication-TileImage"]').attr("content"):t('meta[name="msapplication-TileImage"]').length>0&&(e=t('meta[name="msapplication-TileImage"]').attr("content")),e?(t("#smartbanner .sb-icon").css("background-image","url("+e+")"),a&&t("#smartbanner .sb-icon").addClass("gloss")):t("#smartbanner").addClass("no-icon"),this.bannerHeight=t("#smartbanner").outerHeight()+2,this.scale>1&&(t("#smartbanner").css("top",parseFloat(t("#smartbanner").css("top"))*this.scale).css("height",parseFloat(t("#smartbanner").css("height"))*this.scale).hide(),t("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",t(window).width()/this.scale)),t("#smartbanner").css("position",this.options.layer?"fixed":"static")},listen:function(){t("#smartbanner .sb-close").on("click",t.proxy(this.close,this)),t("#smartbanner .sb-button").on("click",t.proxy(this.install,this))},show:function(e){var i=t("#smartbanner");i.stop(),this.options.layer?(i.animate({bottom:0,display:"block"},this.options.speedIn).addClass("shown").show(),t(this.pushSelector).animate({paddingTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",e)):t.support.transition?(i.animate({bottom:0},this.options.speedIn).addClass("shown"),t(this.pushSelector).addClass("sb-animation").one(t.support.transition.end,function(){t("html").removeClass("sb-animation"),e&&e()}).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)):i.slideDown(this.options.speedIn).addClass("shown"),t(document.body).addClass("ms-smartbanner--show")},hide:function(e){var i=t("#smartbanner");i.stop(),this.options.layer?(i.animate({bottom:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),t(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,"swing",e)):t.support.transition?("android"!==this.type?i.css("bottom",-1*this.bannerHeight*this.scale).removeClass("shown"):i.css({display:"none"}).removeClass("shown"),t(this.pushSelector).addClass("sb-animation").one(t.support.transition.end,function(){t("html").removeClass("sb-animation"),e&&e()}).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)):i.slideUp(this.options.speedOut).removeClass("shown"),t(document.body).removeClass("ms-smartbanner--show")},close:function(t){t.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden),this.options.onClose(t)},install:function(t){this.options.hideOnInstall&&this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder),this.options.onInstall(t)},setCookie:function(t,e,i){var n=new Date;n.setDate(n.getDate()+i),e=encodeURI(e)+(null==i?"":"; expires="+n.toUTCString()),document.cookie=t+"="+e+"; path=/;"},getCookie:function(t){var e,i,n,s=document.cookie.split(";");for(e=0;e<s.length;e++)if(i=s[e].substr(0,s[e].indexOf("=")),n=s[e].substr(s[e].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==t)return decodeURI(n);return null},switchType:function(){var e=this;this.hide(function(){e.type="android"==e.type?"ios":"android";var i=t("android"==e.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");e.appId=/app-id=([^\s,]+)/.exec(i)[1],t("#smartbanner").detach(),e.create(),e.show()})}},t.smartbanner=function(e){var i=t(window),s=i.data("smartbanner"),o="object"==(void 0===e?"undefined":a(e))&&e;s||i.data("smartbanner",s=new n(o)),"string"==typeof e&&s[e]()},t.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:!0,layer:!1,iOSUniversalApp:!0,appendToSelector:"body",pushSelector:"html"},t.smartbanner.Constructor=n,void 0===t.support.transition&&(t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;return t(this).one(t.support.transition.end,function(){i=!0}),setTimeout(function(){i||t(n).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("smartbanner"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}()}))})?n.apply(e,s):n)||(t.exports=o)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(1),a=i(8),r=(n=a)&&n.__esModule?n:{default:n};var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=o.$.extend({"min-height":2500,content:".ms-sticky-ad--sky",sidebar:".ms-sticky-ad--sky",context:null,breakpoint:1024},e),this.$window=(0,o.$)(window),this.$content=(0,o.$)(this.options.content,this.options.context).eq(0),this.$sidebar=(0,o.$)(this.options.sidebar,this.options.context).eq(0),this.$placements=this.$sidebar.children(),this.ads=[],this.$content.length&&this.$sidebar.length&&this.$placements.length&&this.init()}return s(t,[{key:"init",value:function(){var t=this;this.initVars(),this.initEvents(),this.$placements.each(function(e,i){t.ads.push(new r.default({content:(0,o.$)(i),sidebar:(0,o.$)(i).children(),class:"ms-sticky-ad",context:null,breakpoint:1025}))})}},{key:"initVars",value:function(){this.$content.height()<this.options["min-height"]?this.$placements.last().remove():(this.$placements.first().css("max-height",this.options["min-height"]+"px"),this.$placements.last().css("max-height","calc(100% - "+this.options["min-height"]+"px)"))}},{key:"initEvents",value:function(){this.initVars(),this.$window.on("resize",this.initVars.bind(this)),this.$window.on("scroll",this._scroll.bind(this))}},{key:"deinitEvents",value:function(){this.$window.off("resize",this.initVars.bind(this))}},{key:"_scroll",value:function(){var t=this.$sidebar.height();t<this.options["min-height"]||this.$placements.length<2||((0,o.$)(document.scrollingElement).scrollTop()-this.$sidebar.offset().top>=t/2?(this.$placements.eq(0).children().removeClass("visible").addClass("hidden"),this.$placements.eq(1).children().addClass("visible").removeClass("hidden")):(this.$placements.eq(0).children().addClass("visible").removeClass("hidden"),this.$placements.eq(1).children().removeClass("visible").addClass("hidden")))}}]),t}();e.default=l},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=i(17),o=i(5),a=(n=o)&&n.__esModule?n:{default:n},r=i(2);var l=!1;a.default.nextPage=function(t,e,i){var n=$(window),o=$(e).closest(".ms-pager"),a=!0;if(o.length&&i&&i.constructor===Object&&i.status&&i.html){var r=$(i.html);window.msSilentScrollIssuers++,"pageLoadMore"in s.currentPage&&(a=s.currentPage.pageLoadMore(r,o)),a&&o.replaceWith(r),l=!1,setTimeout(function(t){window.msSilentScrollIssuers--},1e3),s.currentPage.complexContent||n.trigger("ms-new-content",[r])}},e.default=function(t){var e,i=$(window);t=$.extend({nextBtnSelector:'[data-id="nextPage"]',offset:500,delay:500,preventState:!1,preventAutoload:!1,forceGATrack:!1},t),i.on("scroll.load-more",(0,r.throttle)(t.delay,function(n){if(!l&&(function(){if(e){if(!document.contains||"function"!=typeof document.contains)return;if(document.contains(e[0])&&e.is(":visible"))return}(e=$(t.nextBtnSelector).filter(":visible")).one("click",function(n){if(e){var s=e.attr("href");l=!0,e=null,!t.preventState&&"function"==typeof history.replaceState&&s?(history.replaceState(null,null,s),i.trigger("ms-url-changed",s)):t.forceGATrack&&i.trigger("ms-url-changed",s)}})}(),!window.preventAutoload&&!t.preventAutoload))if(e.length){var s=document.documentElement.clientHeight;e[0].getBoundingClientRect().top-s>t.offset||!e.is(":visible")||e.trigger("click")}else i.off("scroll.load-more")})).trigger("scroll.load-more")}},function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=r(i(0)),o=i(2),a=(r(i(58)),r(i(16)));function r(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$element=(0,s.default)(e),this.options=i,this._filtered=!1,this._activeFilterSection,this.init()}return n(t,[{key:"init",value:function(){var t=this,e=this.$element.data();this.$window=(0,s.default)(window),this.$tabs=this.$element.find(".ms-filter-category"),this.$filterableTabs=this.$tabs.filter(function(e,i){return-1!==t.options.filterableTypes.indexOf(i.dataset.type)}),this.icons=this.$element.data("icons"),this.$toggler=this.$element.find(".ms-filter_toggler"),this.$filterRow=this.$element.find(".ms-filter_row--selection"),this.$filtersWrapper=this.$element.find(".ms-filter_row-content--selection"),this.$clearFiltersBtns=this.$element.find(".ms-filter-clear, .ms-filter-btn--clear"),this.$tabsWrapper=this.$element.find(".ms-filter_row--options"),this.$filterBlocks=this.$element.find(".ms-filter-block"),this.$filtersEmptyMsg=this.$element.find(".ms-filter-empty"),this.$filterTotal=this.$element.find(".ms-filter-total"),this.$searchInputs=this.$filterBlocks.find(".ms-filter-search_input"),this.$dateFilters=this.$filterBlocks.filter('[data-type="date"]'),this.$dtFromInput=this.$filterBlocks.find(".ms-filter-date-input--start"),this.$dtToInput=this.$filterBlocks.find(".ms-filter-date-input--end"),this.$collapsibleBlocks=this.$filterBlocks.filter(".ms-filter-block--collapsible"),this._filters=[],this.options.filterUrl=e.filterUrl,this.options.raceType=e.raceType,this.options.contentType=e.contentType,this._initFilters(),this._initDateFilters(),this._initEvents(),this.options.autoShow&&this.$tabs.eq(0).trigger("click")}},{key:"clearFilters",value:function(t){var e=this;if(this._filters.length){this._filters=[];var i=this.$filtersWrapper.find(".ms-filter-item");i.each(function(t,n){var s=i.eq(t).data("type");e.$filterBlocks.filter(':not([data-type="'+s+'"])').data("dirty",!0),e.$filterableTabs.filter(':not([data-type="'+s+'"])').removeClass("initialized")});var n=this.$filterableTabs.filter(".current"),s=n.data("type");n.hasClass("initialized")||-1===this.options.filterableTypes.indexOf(s)||(n.addClass("initialized"),this._initializeFilterTab(n)),i.fadeOut(this.options.speed,function(t){i.remove(),e._handleFiltersChanged(),e._loadFilters({withFilter:!0})}),this.$filterBlocks.find("."+this.options.activeCls).removeClass(this.options.activeCls),this.$filterRow.slideUp(),this._clearDateInputs(),this._selectDefaultSingleFilterItems()}}},{key:"_initEvents",value:function(){this.$tabs.on("click",this._handleTabClick.bind(this)),this.$clearFiltersBtns.on("click",this.clearFilters.bind(this)),this.$filtersWrapper.on("click",".ms-filter-item_close",this._handleFilterItemRemoveClick.bind(this)).on("click",".ms-filter-item",this._handleFilterItemClick.bind(this)),this.$toggler.on("click",this._toggleCollapsed.bind(this)),this.$filterBlocks.on("click",".ms-filter-option",this._handleOptionClick.bind(this)),this.$filterBlocks.on("click",".active .ms-filter-option_selected",this._handleOptionRemoveClick.bind(this)),this.$searchInputs.on("input",(0,o.debounce)(this.options.filterDelay,this._handleSearchInput.bind(this))),this.$element.on("click",".ms-filter-alphabet_item",this._onAlphabetItemClick.bind(this)),this.$collapsibleBlocks.on("click",".ms-filter-block_header",this._handleCollaspibleBlockClick.bind(this))}},{key:"_initFilters",value:function(){var t=this;this.$filtersWrapper.find(".ms-filter-item").each(function(e,i){t._addFilteritem((0,s.default)(i).data())}),this._handleFiltersChanged(!0),this._filtered=!!this._filters.length}},{key:"_initDateFilters",value:function(){var t=this,e=this.$dtFromInput.data("date"),i=this.$dtToInput.data("date"),n=this.$dateFilters.data("race-type-id");this.dateRangePickers=null;var o=null;s.default.get("/first-article/"+(n?"?filters[race_type][]="+n:"")).then(function(n){var s,a,r;n.status&&(o=n.from_date,s=new Date,a=t.$dtFromInput.flatpickr({minDate:o,maxDate:i||s,defaultDate:e,onChange:function(e,i,n){if(r.set("minDate",i||o),t.$dtFromInput.data("cleared"))return t.$dtFromInput.data("cleared",!1),void(r.selectedDates.length&&a.set("maxDate",r.selectedDates[0]));if(t._removeFilterItem("date","from_date",!!i),i){var s={id:"from_date",key:"date",subKey:"from",val:i,type:"date",title:i18n.from_date+": "+i};t._addFilteritem(s),t._handleFiltersChanged(),t.$filtersWrapper.append(t._generateFilterItem(s))}}}),r=t.$dtToInput.flatpickr({minDate:e||o,maxDate:s,defaultDate:i,onChange:function(e,i,n){if(a.set("maxDate",i||s),t.$dtToInput.data("cleared"))t.$dtToInput.data("cleared",!1);else if(t._removeFilterItem("date","to_date",!!i),i){var o={id:"to_date",key:"date",subKey:"to",val:i,type:"date",title:i18n.to_date+": "+i};t._addFilteritem(o),t._handleFiltersChanged(),t.$filtersWrapper.append(t._generateFilterItem(o))}}}),t.dateRangePickers={dtFromPlugin:a,dtToPlugin:r})})}},{key:"_handleDateFilterItemRemove",value:function(t){this.dateRangePickers&&("from_date"===t?(this.$dtFromInput.data("cleared",!0),this.dateRangePickers.dtFromPlugin.clear()):"to_date"===t&&(this.$dtToInput.data("cleared",!0),this.dateRangePickers.dtToPlugin.clear()))}},{key:"_clearDateInputs",value:function(){this.dateRangePickers&&(this.dateRangePickers.dtFromPlugin.clear(),this.dateRangePickers.dtToPlugin.clear())}},{key:"_addFilteritem",value:function(t){this._filters.push(t),this.$filterableTabs.not('[data-type="'+t.type+'"]').removeClass("initialized"),this.$filterRow.slideDown()}},{key:"_removeFilterItem",value:function(t,e,i){var n,s,o,a,r=this;n=this.$filtersWrapper.find('[data-type="'+t+'"][data-id="'+e+'"]'),s=(o=this.$filterBlocks.filter('[data-type="'+t+'"]')).find('[data-id="'+e+'"]'),this._filters.forEach(function(i,n){a||i.type!==t||i.id!==e||(a=n)}),void 0!==a&&this._filters.splice(a,1),i?n.remove():("date"===t&&this._handleDateFilterItemRemove(e),this.$filterableTabs.not('[data-type="'+t+'"]').removeClass("initialized"),this.$filterBlocks.not('[data-type="'+t+'"]').data("dirty",!0),this._activeFilterSection&&this._activeFilterSection!==t&&this._loadFilters({withFilter:this._filtered}),s.removeClass(this.options.activeCls),n.fadeOut(this._replaceFlag?0:this.options.speed,function(t){n.remove(),r._handleFiltersChanged(r._replaceFlag)}),this._replaceFlag||this._filters.length||this.$filterRow.slideUp(),this._replaceFlag||-1===this.options.singleFilters.indexOf(t)||o.find(".ms-filter-option."+this.options.activeCls).length||this._selectDefaultSingleFilterItems(t),this._replaceFlag=!1)}},{key:"_selectDefaultSingleFilterItems",value:function(t){var e=this;this.options.singleFilters.filter(function(e){return!t||e===t}).forEach(function(t){e.$filterBlocks.filter('[data-type="'+t+'"]').find(".ms-filter-option").first().addClass(e.options.activeCls)})}},{key:"_handleFilterItemRemoveClick",value:function(t){var e=(0,s.default)(t.currentTarget).closest(".ms-filter-item").data();t.stopPropagation(),this._removeFilterItem(e.type,e.id)}},{key:"_handleFilterItemClick",value:function(t){var e=(0,s.default)(t.currentTarget).data(),i=this.$tabs.filter('[data-type="'+e.type+'"]');i.hasClass(this.options.currentCls)||i.trigger("click")}},{key:"_toggleCollapsed",value:function(t){var e=this.$tabs.filter("."+this.options.currentCls);(e=e.length?e:this.$tabs.eq(0)).trigger("click")}},{key:"_openFilters",value:function(){var t=this;this.$tabsWrapper.stop().show(0,function(e){t.options.autoShow=!1,t.$tabsWrapper.css("height","")})}},{key:"_closeFilters",value:function(){var t=this;this.$tabsWrapper.stop().hide(0,function(e){t.$tabs.removeClass(t.options.currentCls),t.$filterBlocks.removeClass(t.options.currentCls)})}},{key:"_handleTabClick",value:function(t){var e=(0,s.default)(t.target),i=e.data();if(e.hasClass(this.options.currentCls))return this._activeFilterSection=null,void this._closeFilters();this._handleActiveFilterChange(i.type)}},{key:"_handleActiveFilterChange",value:function(t){var e=this.$tabs.filter('[data-type="'+t+'"]'),i=this.$filterBlocks.filter('[data-type="'+t+'"]');this._activeFilterSection=t,this.$tabs.removeClass(this.options.currentCls),this.$filterBlocks.removeClass(this.options.currentCls),e.addClass(this.options.currentCls),i.addClass(this.options.currentCls),e.hasClass("initialized")||(e.addClass("initialized"),i.data("dirty",!0),-1!==this.options.filterableTypes.indexOf(t)&&this._initializeFilterTab(e)),this._openFilters()}},{key:"_initializeFilterTab",value:function(t){this._loadFilters({forceOptionsLoad:!0})}},{key:"_handleOptionClick",value:function(t){var e,i,n,o,a=(0,s.default)(t.currentTarget);if(!a.hasClass(this.options.activeCls)&&!a.hasClass("ms-link")){if(e=a.closest(".ms-filter-block").data("type"),i=a.data("id"),n=a.data("count"),o=a.find(".ms-filter-option_title").text(),!this.options.allowMultiSelect||-1!==this.options.toggleTypes.indexOf(e)){i&&(this._replaceFlag=!0),this.$filterBlocks.filter('[data-type="'+e+'"]').find(".active .ms-filter-option_selected").trigger("click");var r=this.$filtersWrapper.find('.ms-filter-item[data-type="'+e+'"]');r.length&&this._removeFilterItem(e,r.data("id")),this._replaceFlag=!1}a.addClass(this.options.activeCls);var l={id:i,count:n,type:e,title:o};i&&this._addFilteritem(l),this._handleFiltersChanged(),i&&this.$filtersWrapper.append(this._generateFilterItem(l))}}},{key:"_generateFilterItem",value:function(t){var e,i="";return e=(0,s.default)('\n      <div\n        class="ms-filter-item"\n        data-type="'+t.type+'"\n        data-type="'+t.type+'"\n        data-id="'+t.id+'"\n      ></div>\n    '),t.flag&&(i+='<span class="ms-filter-item_flag"></span>'),i+='\n      <span class="ms-filter-item_title">\n        '+t.title+"\n        "+(t.count?"("+t.count+")":"")+'\n      </span>\n      <svg class="ms-filter-item_close">\n        <use xlink:href="'+this.icons.times+'"></use>\n      </svg>\n    ',e.html(i),e}},{key:"_handleFiltersChanged",value:function(t){this._filters.length?(this.$filtersEmptyMsg.hide(),this.$clearFiltersBtns.removeClass("disabled")):(this.$filtersEmptyMsg.show(),this._filtered||this.$clearFiltersBtns.addClass("disabled")),this._currentFilterRequest&&"pending"===this._currentFilterRequest.state()&&this._currentFilterRequest.abort(),t||this._handleApplyFilters()}},{key:"_handleOptionRemoveClick",value:function(t){t.stopPropagation();var e=(0,s.default)(t.currentTarget).closest(".ms-filter-option"),i=e.closest(".ms-filter-block").data("type"),n=e.data("id");this._removeFilterItem(i,n)}},{key:"_onAlphabetItemClick",value:function(t){var e=(0,s.default)(t.currentTarget);e.hasClass(this.options.activeCls)||e.hasClass("empty")||(e.siblings().removeClass(this.options.activeCls).end().addClass(this.options.activeCls),this._loadFilters({letter:!0,forceOptionsLoad:!0}))}},{key:"_handleSearchInput",value:function(t){var e=(0,s.default)(t.target).val();e.length&&e.length<this.options.minChars||this._loadFilters({search:!0,forceOptionsLoad:!0})}},{key:"_handleCollaspibleBlockClick",value:function(t){var e=(0,s.default)(t.currentTarget).closest(".ms-filter-block"),i=e.find(".ms-filter-block_content");e.toggleClass("expanded"),i.stop().slideToggle(),e.hasClass("expanded")&&(this.$filterBlocks.not(e).removeClass("expanded").find(".ms-filter-block_content").slideUp(),this._handleActiveFilterChange(e.data("type")))}},{key:"_formatFilters",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={};return this._filters.forEach(function(n){if(!(-1===t.options.filterableTypes.indexOf(n.type)&&-1===t.options.staticFilters.indexOf(n.type)||e&&t._activeFilterSection===n.type)){var s=!t.options.singleFilters.includes(n.type),o=n.key||n.type,a=n.subKey,r=n.val||n.id;!i.hasOwnProperty(o)&&s&&(a?(i[o]={},i[o][a]=[]):i[o]=[]),s?a?i[o][a].push(r):i[o].push(r):r&&(a?(i[o]||(i[o]={}),i[o][a]=r):i[o]=r)}}),i}},{key:"_loadFilters",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(-1===this.options.staticFilters.indexOf(this._activeFilterSection)){var i=this.$filterBlocks.filter(".current"),n=i.data("dirty"),o=i.find(".ms-filter-search_input"),a=i.find(".ms-filter-alphabet"),r=o.length?o.val():null,l=a.length?a.find(".active").data("value"):null;i.data("dirty",!1),this._currentSearchRequest&&"pending"===this._currentSearchRequest.state()&&this._currentSearchRequest.abort("new request"),!e.withFilter&&this._currentFilterRequest&&"pending"===this._currentFilterRequest.state()&&this._currentFilterRequest.abort();var c={entity_type:this.options.contentType,filters:this._formatFilters(this.options.preventFilterOnCurrentSection)};this.options.raceType&&(c.filters.race_type=[this.options.raceType]),(""===l||l)&&(c.first_letter=l,e.letter&&l!==this.options.allLetter&&o.val("")),e.search&&r&&(c.title=r,c.first_letter=this.options.allLetter,a.find(".active").removeClass("active"),a.children().first().addClass("active"));var d=this.$filterBlocks.filter("."+this.options.currentCls),u=d.find(".ms-filter-search-result-wrapper"),h=d.find(".ms-filter-loading"),f=u.find(".ms-filter-search-result");!n&&!e.forceOptionsLoad||f.hasClass("ms-filter-search-result--static")||(f.empty(),u.find(".ms-filter-empty").remove(),h.show()),this._currentSearchRequest=s.default.get({url:"/"+this._activeFilterSection+"/listing/",data:c}).done(this._handleLoadFiltersSuccess.bind(this)).fail(function(t,e,i){}).always(function(e){return t._currentSearchRequest=null})}}},{key:"_handleLoadFiltersSuccess",value:function(t){if(t){var e=this.$filterBlocks.filter("."+this.options.currentCls),i=e.find(".ms-filter-search-result-wrapper"),n=e.find(".ms-filter-loading"),o=(0,s.default)("<div></div>");n.hide(),o.html(t.html),e.find(".ms-filter-alphabet").empty().html('<span class="ms-filter-alphabet_sizer"></span>'.repeat(15)).prepend(o.find(".ms-filter-alphabet_item")),i.find(".ms-filter-empty").remove(),i.prepend(o.find(".ms-filter-empty")),e.find(".ms-filter-search-result").empty().append(o.find(".ms-filter-option")),this._highlightActiveFilters(e)}}},{key:"_highlightActiveFilters",value:function(t){var e=this,i=this._formatFilters(),n=t.data("type"),s=function(t){if(n!==t)return"continue";var s=e.$filterBlocks.filter('[data-type="'+t+'"]');i[t].forEach(function(t){s.find('.ms-filter-option[data-id="'+t+'"]').addClass(e.options.activeCls)})};for(var o in i)s(o)}},{key:"_handleApplyFilters",value:function(){var t=this;this.$window.trigger("ms-filter-apply");var e=this._formatFilters(),i=this.options.filterUrl;this.options.raceType&&(e.race_type=[this.options.raceType]),this._filters.length&&(i+="?"+s.default.param({filters:e}));var n={entity_type:this.options.contentType,filters:e};history.replaceState(null,null,i),this.$window.trigger("ms-url-changed",[i]),this._loadFilters({withFilter:!0}),this._currentFilterRequest=s.default.get({url:i,data:n}).done(this._processFilterSuccess.bind(this)).fail(function(t,e,i){}).always(function(e){t._currentFilterRequest=null})}},{key:"_processFilterSuccess",value:function(t){this._filtered=!!this._filters.length;var e=(0,s.default)(t.html);this.$filterTotal.html(e.find(".ms-filter-total").html()),this._filtered||this.$clearFiltersBtns.addClass("disabled"),this.$window.trigger("ms-filter-new-content",[t])}}]),t}();l.DEFAULTS={currentCls:"current",activeCls:"active",toggleTypes:["sort_by","posted_in"],filterableTypes:["event","sub_event","track","driver","team","photographer","location","championship","article_type"],staticFilters:["best_photos","prime","date"],singleFilters:["best_photos","prime","date"],allowMultiSelect:!1,preventFilterOnCurrentSection:!0,allLetter:"_",speed:300,filterDelay:500,minChars:3,filterUrl:null,raceType:null,contentType:null},(0,a.default)("msFilter",l)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(18),a=(n=o)&&n.__esModule?n:{default:n};var r=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,$.extend({showIcon:!0,showName:!1,showTitle:!0,showLabel:!1,showCount:!1,styleClass:""},t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),s(e,[{key:"render",value:function(t){return'\n      <div class="ms-share-box-inline '+this.options.styleClass+'">\n        <span data-button onclick data-id="shareBoxToggle" data-value="ms-share-box-inline-switcher" data-clear="2" class="ms-share-box-inline-switcher"></span>\n        <div class="ms-share-box-inline-items">\n          <div class="ms-share-box-inline-items-wrapper">\n            '+this.renderItems(t)+"\n          </div>\n        </div>\n      </div>"}}]),e}();e.default=r},,,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var o=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend({wrapperSelector:null,itemSelector:".msnt-gallery_item",loop:!0,toggle:!0,skipSelectors:null,debug:!1,context:null},e),this.$window=$(window),this.$wrapper=$(this.options.wrapperSelector,this.options.context),this.options.debug&&!this.$wrapper.length)throw new Error('Cannot find wrapper with provided selector "'+this.options.wrapperSelector+'"');this._init()}return n(t,[{key:"next",value:function(){this.atTheEnd||this._navigate("next")}},{key:"prev",value:function(){this.atTheStart||this._navigate("prev")}},{key:"_init",value:function(){this._initEvents()}},{key:"_handleItemChange",value:function(t){this.$curItem&&this.$curItem.removeClass(this.options.currentItemCls),this.$curItem=t,this.$curItem.addClass(this.options.currentItemCls),this.$wrapper.trigger("msnt-gallery:itemchanged",[t]),this._updateState()}},{key:"_handleItemClick",value:function(t){t.preventDefault();var e=$(t.currentTarget),i=e.hasClass(this.options.currentItemCls);if(this.navigationDirection=null,this.options.toggle)i?(e.removeClass(this.options.currentItemCls),this.$wrapper.trigger("msnt-gallery:itemchanged")):(this._handleItemChange(e),this.$wrapper.trigger("msnt-gallery:userinteraction",["navigation","itemchanged"]));else{if(i)return;this._handleItemChange(e),this.$wrapper.trigger("msnt-gallery:userinteraction",["navigation","itemchanged"])}}},{key:"_initEvents",value:function(){var t=this;this.$wrapper.on("click",this.options.itemSelector,this._handleItemClick.bind(this)),this.$window.on("keydown.msnt-gallery-navigation",function(e){if(t.$wrapper.hasClass("msnt-gallery--current"))switch(e.keyCode){case 39:case 40:e.preventDefault(),t.$wrapper.trigger("msnt-gallery:userinteraction",["navigation","next"]),t.next();break;case 37:case 38:e.preventDefault(),t.$wrapper.trigger("msnt-gallery:userinteraction",["navigation","prev"]),t.prev()}})}},{key:"_getNewItem",value:function(t){var e,i=this.$curItem[t]();if(i.length&&i.is(this.options.skipSelectors)&&(i=i[t]()),!i.length||i.is(":not("+this.options.itemSelector+")")){if(!this.options.loop)return $([]);e="next"===t?"first":"last",i=this.$wrapper.find(this.options.itemSelector)[e]()}if(this.options.debug&&!i.length)throw new Error('Cannot find item with provided selector "'+this.options.itemSelector+'"');return i}},{key:"_getPreloadItems",value:function(t){var e,i,n=this.$curItem.prevAll(this.options.itemSelector+":lt("+t.before+")"),o=this.$curItem.nextAll(this.options.itemSelector+":lt("+t.after+")");if(this.options.loop){var a,r;if(n.length<t.before)i=(e=this.$wrapper.find(this.options.itemSelector)).filter(":gt("+(e.length-1-t.before+n.length)+")").get().reverse(),n=$((a=n.get()).concat.apply(a,s(i)));if(o.length<t.after)i=this.$wrapper.find(this.options.itemSelector).filter(":lt("+(t.after-o.length)+")").get(),o=$((r=o.get()).concat.apply(r,s(i)))}return{before:n,after:o}}},{key:"_getItemData",value:function(t){return $.extend({},t.data(),{url:t.find("img").attr("src")})}},{key:"_navigate",value:function(t){this.$curItem?(this.navigationDirection=t,this._handleItemChange(this._getNewItem(t))):this.debug&&console.warn("Atttemp to use navigation when container don't have current item")}},{key:"_updateState",value:function(){var t=this._getNewItem("next"),e=this._getNewItem("prev");t.length?this.atTheEnd&&(this.atTheEnd=!1,this.$wrapper.trigger("msnt-gallery:movedfromend")):(this.atTheEnd=!0,this.$wrapper.trigger("msnt-gallery:atend")),e.length?this.atTheStart&&(this.atTheStart=!1,this.$wrapper.trigger("msnt-gallery:movedfromstart")):(this.atTheStart=!0,this.$wrapper.trigger("msnt-gallery:atstart"))}}]),t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.default=function(t){return function(e){function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,$.extend({toggle:!1,itemSelector:'.image, .ms-article_filmstrip-item, [data-widget="image"][data-id]:not(.photo-external-link):not([data-id=""]), [data-widget="points-of-interest"], .article-fullwidth-gallery_img'},t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,t),n(i,[{key:"_getNewItem",value:function(t){var e=this.$imagesCollection.index(this.$curItem)+("next"===t?1:-1);return 1===this.$imagesCollection.length||!this.options.loop&&(e<0||e===this.$imagesCollection.length)?$([]):(e<0?e=this.$imagesCollection.length-1:e===this.$imagesCollection.length&&(e=0),this.$imagesCollection.eq(e))}},{key:"_getPreloadItems",value:function(t){if(1===this.$imagesCollection.length)return{before:$([]),after:$([])};for(var e=this.$imagesCollection.index(this.$curItem),i=this.$imagesCollection.length,n=t.before,s=[];n--;){var o=e-(t.before-n);if(o<0){if(!this.options.loop)break;o=i+o}s.push(this.$imagesCollection.eq(o)[0])}for(var a=t.after,r=[];a--;){var l=e+(t.after-a);if(l>=i){if(!this.options.loop)break;l-=i}r.push(this.$imagesCollection.eq(l)[0])}return{before:$(s),after:$(r)}}},{key:"_getItemData",value:function(t){return $.extend({},this._extractItemParamsByType(t))}},{key:"_extractItemParamsByType",value:function(t){var e=void 0;return t.hasClass("ms-article_main-img")||t.hasClass("article-fullwidth-gallery_img")?e=this._extractParamsFromMainImg(t):t.hasClass("ms-article_filmstrip-item")?e=this._extractParamsFromFilmstripItem(t):t.hasClass("image")?e=this._extractParamsFromThumbItem(t):t.is('[data-widget="image"]')?e=this._extractParamsFromImageWidget(t):t.is('[data-widget="points-of-interest"]')&&(e=this._extractParamsFromPOIWidget(t)),e}},{key:"_extractParamsFromFilmstripItem",value:function(t){return{detailUrl:t.data("detail-url"),id:t.data("id"),url:t.find("img").attr("src")}}},{key:"_extractParamsFromMainImg",value:function(t){var e=t.data("detail-url"),i=t.attr("src");return{detailUrl:e,id:t.data("photo-id"),url:i}}},{key:"_extractParamsFromPOIWidget",value:function(t){return{id:t.data("id"),url:t.data("image-src")}}},{key:"_extractParamsFromImageWidget",value:function(t){return{id:t.data("id"),url:t.find("img").attr("src")}}},{key:"_extractParamsFromThumbItem",value:function(t){var e=t.find(".thumb").attr("href"),i=t.find("img").attr("src"),n=i.indexOf("/images/mgl/"),s=i.indexOf("/static/img/mgl/"),o=void 0,a=void 0,r=e.match(/\d{3,}(?!.*\d{3,})/);return r?a=r[0]:-1!==s?(o=s+"/static/img/mgl/".length,a="_"+(o=i.substr(o)).split("/")[4]):(o=n+"/images/mgl/".length,a="_"+i.substr(o,i.indexOf("/",o)-o)),{detailUrl:e,id:a,url:i}}}]),i}()}},,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=r(i(68)),o=r(i(72)),a=r(i(74));function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function l(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}i(79),i.p=window.jsBuildBasePath;var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=$.extend({wrapperSelector:".msnt-gallery",preload:{before:1,after:2},debug:!1,currentItemCls:"current",context:null,fullscreenCls:"ms-fullscreen-layout",openCls:"msnt-gallery-open",slideshowActiveCls:"slideshow",slideshowInterval:5e3,gaTrackDetail:!0,scrollingElement:document.scrollingElement,contentProvider:"UrlProvider",navigationProvider:"Navigation",transitionProvider:"Transition"},e),n=$(i.wrapperSelector,i.context).eq(0);if(i.debug&&!n.length)throw new Error('Cannot find wrapper with provided selector "'+i.wrapperSelector+'"');n.hasClass("initialized")||(n.addClass("initialized"),this.$wrapper=n,this.options=i,this.hidden=!0,this.fullscreen=!1,this.slideshow=!1,this.animated=!1,this._resizersCount=0,this.isTouch=!!("ontouchstart"in window),this.$html=$(document.documentElement),this.$body=$(document.body),this.isRtl=this.$body.data("edtn-rtl"),this.$scrollingElement=$(this.options.scrollingElement),this.$htmlbody=$("html, body"),this.$window=$(window),this._init())}return n(t,[{key:"_init",value:function(){var t=this;this.elements={},this._initMarkup(),this._addMainWrapper(),this._fixIcons(),this._attachContentProvider(),this._attachNavigationProvider(),this._attachTransitionProvider(),this.$wrapper.on("msnt-gallery:itemchanged",function(e,i){e.stopPropagation(),t.hidden&&(t._currentBrowseURL=window.location.href),i?(t.$curItem=i,t._processItem(i),t.show()):t.hide()}),this.$wrapper.on("msnt-gallery:atstart",function(e,i){t.elements.$gallery.addClass("atstart")}),this.$wrapper.on("msnt-gallery:atend",function(e,i){t.elements.$gallery.addClass("atend")}),this.$wrapper.on("msnt-gallery:movedfromstart",function(e,i){t.elements.$gallery.removeClass("atstart")}),this.$wrapper.on("msnt-gallery:movedfromend",function(e,i){t.elements.$gallery.removeClass("atend")}),this._currentBrowseURL=window.location.href,this._currentItemURL=null}},{key:"show",value:function(){!1!==this._beforeShow()&&this.hidden&&(this.fullscreen&&this.$body.addClass(this.options.fullscreenCls),this.$body.addClass(this.options.openCls),this.elements.$gallery.addClass("visible"),this._initEvents(),this.$wrapper.addClass("msnt-gallery--current"),this._show(),this.$wrapper.trigger("msnt-gallery:show"))}},{key:"_handleUrlChanged",value:function(t,e){this._currentBrowseURL=e,history.replaceState(null,null,this._currentItemURL)}},{key:"hide",value:function(){!1!==this._beforeHide()&&(this.hidden||(this.$wrapper.removeClass("msnt-gallery--current"),history.replaceState(null,null,this._currentBrowseURL),this.fullscreen&&this.$body.removeClass(this.options.fullscreenCls),this.$body.removeClass(this.options.openCls),this.elements.$gallery.removeClass("visible"),this.$window.off("keydown.msnt-gallery"),this._unscheduleNextSlide(),this._deinitEvents(),this._hide(),this.$curItem.removeClass(this.options.currentItemCls),this.$curItem=null,this.$wrapper.trigger("msnt-gallery:hide"),this.$window.trigger("ms-url-changed-virtual",[this._currentBrowseURL])))}},{key:"toggleFullscreen",value:function(){this.fullscreen=!this.fullscreen,this.elements.$gallery.toggleClass("fullscreen"),this.$body.toggleClass(this.options.fullscreenCls)}},{key:"toggleSlideshow",value:function(){this.slideshow=!this.slideshow,this["_"+(this.slideshow?"schedule":"unschedule")+"NextSlide"]()}},{key:"_processItem",value:function(t){var e=this,i=this.navigationProvider._getPreloadItems(this.options.preload),n=i.before,s=i.after,o=this.navigationProvider._getItemData(t),a=$.map(n,function(t){return e.navigationProvider._getItemData($(t))}),r=$.map(s,function(t){return e.navigationProvider._getItemData($(t))});this._currentItemURL=this.options.gaTrackDetail&&o.detailUrl||this._currentBrowseURL,history.replaceState(null,null,this._currentItemURL),o.isMain=!0;var c=[];this.contentProvider.processItems([o].concat(l(r),l(a))),c.push(a.length?a[0].id:""),c.push(o.id),c.push(r.length?r[0].id:""),this._updateMarkup(this.contentProvider.getItemsInfo(c))}},{key:"handlePrevBtnClick",value:function(t){this.$wrapper.trigger("msnt-gallery:userinteraction",["navigation","prev"]),this.navigationProvider.prev()}},{key:"handleNextBtnClick",value:function(t){this.$wrapper.trigger("msnt-gallery:userinteraction",["navigation","next"]),this.navigationProvider.next()}},{key:"_initEvents",value:function(){var t=this;this.$window.on("ms-url-changed.msnt-gallery-container",this._handleUrlChanged.bind(this)).on("keydown.msnt-gallery-container",function(e){switch(e.keyCode){case 27:t.fullscreen?t.toggleFullscreen():t.hide()}}),this.elements.$infoBlock=this.elements.$gallery.find(".msnt-gallery_block--info"),this.elements.$closeBtn.on("click",this.hide.bind(this)),this.elements.$gallery.on("click",".msnt-gallery_fullscreen-btn",this.toggleFullscreen.bind(this)).on("click",".msnt-gallery_prev-btn",this.handlePrevBtnClick.bind(this)).on("click",".msnt-gallery_next-btn",this.handleNextBtnClick.bind(this)).on("click",".msnt-gallery-slideshow",this.toggleSlideshow.bind(this)).on("mousewheel.msnt-gallery-container",".msnt-gallery-item",this._preventScrollPropagation.bind(this)).on("touchstart.msnt-gallery-container",function(e){t._touchStart=e.touches[0].pageY}).on("touchmove.msnt-gallery-container",".msnt-gallery-item",function(e){var i=e.touches[0].pageY-t._touchStart;t._preventScrollPropagation(e,i),t._touchStart=e.touches[0].pageY}),this.$wrapper.on("msnt-gallery:userinteraction",function(e,i,n){t._unscheduleNextSlide()}),this.elements.$infoBlock.on("touchstart.msnt-gallery-container",function(e){t._touchStartInfo=e.touches[0].pageY}).on("touchmove.msnt-gallery-container",function(e){var i=t.elements.$infoBlock,n=e.touches[0].pageY-t._touchStartInfo;i.scrollTop(i.scrollTop()-n),t._touchStartInfo=e.touches[0].pageY})}},{key:"_deinitEvents",value:function(){this.$window.off("keydown.msnt-gallery-container").off("ms-url-changed.msnt-gallery-container"),this.elements.$closeBtn.off("click"),this.$wrapper.off("msnt-gallery:userinteraction"),this.elements.$infoBlock.off("touchstart.msnt-gallery-container").off("touchmove.msnt-gallery-container"),this.elements.$gallery.off("click").off("mousewheel.msnt-gallery-container").off("touchstart.msnt-gallery-container").off("touchmove.msnt-gallery-container")}},{key:"_preventScrollPropagation",value:function(t,e){var i=t.currentTarget,n=$(i),s=n.outerHeight();(i.scrollHeight!=i.clientHeight||this.isTouch)&&(this.isTouch&&!this.elements.$gallery.hasClass("fullscreen")||t.stopPropagation(),n.scrollTop()>=i.scrollHeight-s&&e<0||0===n.scrollTop()&&e>0?(window.preventScrollFlag=!0,t.preventDefault()):window.preventScrollFlag=!1)}},{key:"_addMainWrapper",value:function(){this.elements.$gallery.hide().addClass("initialized"),this.$wrapper.append(this.elements.$gallery)}},{key:"_fixIcons",value:function(){this.elements.$closeBtn.html(this.elements.$closeBtn.html())}},{key:"_initMarkup",value:function(){var t=$($("#msnt-gallery-detail").html());this.elements.$gallery=t,this.elements.$itemsWrapper=this.elements.$gallery.find(".msnt-gallery_items-wrapper"),this.$placeholderItem=t.find(".msnt-gallery-item--placeholder"),this.elements.$closeBtn=t.find(".msnt-gallery_close-btn")}},{key:"_initNewItem",value:function(t){this.elements.$currentSlide=t,this._scheduleNextSlide()}},{key:"_scheduleNextSlide",value:function(){var t=this;!this.navigationProvider.atTheEnd&&this.slideshow?(this._unscheduleNextSlide(!0),this.elements.$gallery.addClass(this.options.slideshowActiveCls),this._nextSlideTimeout=setTimeout(function(e){t.navigationProvider.next()},this.options.slideshowInterval)):this._unscheduleNextSlide()}},{key:"_unscheduleNextSlide",value:function(t){t||(this.slideshow=!1,this.elements.$gallery.removeClass(this.options.slideshowActiveCls)),clearTimeout(this._nextSlideTimeout),this._nextSlideTimeout=null}},{key:"_updateMarkup",value:function(t){var e=this,i=$([]),n=this.elements.$itemsWrapper.children(),s=$([]),o=$([]),a=$([]),r=$([]);t.forEach(function(t,l){var c;if(t)switch(t.html?c=$(t.html):(c=e.$placeholderItem.clone()).attr("data-id",t.id),c.data("image-data",t),c.find("img").attr("src",t.url),l){case 0:c.addClass("msnt-gallery-item--before"),s=c,i=i.add(s);break;case 1:(r=n.filter('[data-id="'+t.id+'"]')).length?(o=r.eq(0),r=o,o.removeClass("msnt-gallery-item--before msnt-gallery-item--after")):o=c,i=i.add(o),o.addClass("msnt-gallery-item--current");break;case 2:c.addClass("msnt-gallery-item--after"),a=c,i=i.add(a)}}),r.length?(n.not(r).remove(),s.length&&s.insertBefore(r),a.length&&a.insertAfter(r)):this.elements.$itemsWrapper.html(i),this.$window.trigger("msnt-gallery:current-item-changed",[o,t[1]]),this._initNewItem(o)}},{key:"_beforeShow",value:function(){}},{key:"_beforeHide",value:function(){}},{key:"_show",value:function(){this.elements.$gallery.show(),this.hidden=!1}},{key:"_hide",value:function(){this.elements.$gallery.hide(),this.hidden=!0}},{key:"_addResizer",value:function(t){t&&(this.animated=!0),this._resizersCount++,this._resizersCount>1||window.msSilentScrollIssuers++}},{key:"_removeResizer",value:function(t){this._resizersCount--,t&&(this.animated=!1),0===this._resizersCount&&setTimeout(function(t){window.msSilentScrollIssuers--},1)}},{key:"_onItemLoaded",value:function(t){var e=this.elements.$itemsWrapper.find('[data-id="'+t.id+'"]');t.urlLarge&&e.find(".msnt-gallery_img").attr("src",t.url)}},{key:"_onItemData",value:function(t){var e=this;t.forEach(function(t){var i,n=e.elements.$itemsWrapper.find('[data-id="'+t.id+'"]');n.length&&(i=$(t.html),"img"==t.type?(n.find(".msnt-gallery_banner-top").html(i.find(".msnt-gallery_banner-top").html()),n.find(".msnt-gallery_block--info").html(i.find(".msnt-gallery_block--info").html())):n.html(i.html()),n.removeClass("msnt-gallery-item--placeholder"),n.hasClass("msnt-gallery-item--current")&&e.$window.trigger("msnt-gallery:item-info-updated",[n,t]),e.$window.trigger("msnt-gallery:item-info-added",[n,t]))})}},{key:"_onTransitionEnd",value:function(t){this.navigationProvider[t]()}},{key:"_attachContentProvider",value:function(){this.contentProvider=new o[this.options.contentProvider]($.extend({url:this.options.url,onItemData:this._onItemData.bind(this),onItemLoaded:this._onItemLoaded.bind(this)},this.options.contentProviderOptions))}},{key:"_attachNavigationProvider",value:function(){this.navigationProvider=new s[this.options.navigationProvider]($.extend({debug:this.options.debug,itemSelector:this.options.itemSelector,wrapperSelector:this.options.wrapperSelector,skipSelectors:this.options.gallerySelector,currentItemCls:this.options.currentItemCls,isRtl:this.isRtl,context:this.options.context,loop:this.options.loop},this.options.navigationProviderOptions))}},{key:"_attachTransitionProvider",value:function(){this.transitionProvider=new a[this.options.transitionProvider]($.extend({debug:this.options.debug,wrapperSelector:this.options.wrapperSelector,itemsWrapperSelector:this.options.galleryItemsSelector,dragElSelector:this.options.galleryDragElSelector,onTransitionEnd:this._onTransitionEnd.bind(this),context:this.options.context,navigationProvider:this.navigationProvider},this.options.transtionProviderOptions))}}]),t}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LiveTextNavigation=e.ArticleNavigation=e.MosaicNavigation=e.Navigation=void 0;var n=r(i(60)),s=r(i(69)),o=r(i(70)),a=r(i(71));function r(t){return t&&t.__esModule?t:{default:t}}e.Navigation=n.default,e.MosaicNavigation=s.default,e.ArticleNavigation=o.default,e.LiveTextNavigation=a.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(60),a=(n=o)&&n.__esModule?n:{default:n};var r=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,$.extend({loop:!1},t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),s(e,[{key:"_getLastItem",value:function(){for(var t=this.$curItem,e=t.next();e.length&&this._checkIsLast(t,e);)e=(t=e).next();return t}},{key:"_checkIsLast",value:function(t,e){return this.options.isRtl?e[0].getBoundingClientRect().left<=t[0].getBoundingClientRect().left:e[0].getBoundingClientRect().right>=t[0].getBoundingClientRect().right}}]),e}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=r(i(60)),a=r(i(61));function r(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,a.default)(o.default)),n(e,[{key:"_initEvents",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initEvents",this).call(this),$('.ms-article_main-img:not([data-photo-id=""])',this.options.context).on("click",this._handleItemClick.bind(this))}},{key:"_init",value:function(){this.$imagesCollection=this.$wrapper.find(this.options.itemSelector),this.$imagesCollection=$('.ms-article_main-img:not([data-photo-id=""])',this.options.context).add(this.$imagesCollection),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_init",this).call(this)}}]),e}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function t(e,i,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=r(i(60)),a=r(i(61));function r(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,(0,a.default)(o.default)),n(e,[{key:"_initEvents",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initEvents",this).call(this),this.$wrapper.on("mslt-content-changed",function(e,i,n){n.find(t.options.itemSelector).length&&(t.$imagesCollection=t.$wrapper.find(t.options.itemSelector))})}},{key:"_init",value:function(){this.$imagesCollection=this.$wrapper.find(this.options.itemSelector),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_init",this).call(this)}}]),e}();e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlProvider=void 0;var n,s=i(73),o=(n=s)&&n.__esModule?n:{default:n};e.UrlProvider=o.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.p=window.jsBuildBasePath;var s=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.STATUSES={error:-1,pending:0,fetched:1,loading:2,loaded:3},!this.options||!this.options.url)throw new Error("URL is required");this.init()}return n(t,[{key:"init",value:function(){this._cache={}}},{key:"getItemInfo",value:function(t){return this._cache[t]}},{key:"getItemsInfo",value:function(t){var e=this;return t.map(function(t){return e.getItemInfo(t)})}},{key:"hasItem",value:function(){return!!this._cache[key]}},{key:"processItems",value:function(t){var e=this,i=[];t.forEach(function(t){var n=e._cache[t.id];(n?t=$.extend(n,{isMain:t.isMain||!1}):e._cache[t.id]=$.extend(t,{status:e.STATUSES.pending}),t.status===e.STATUSES.pending)&&(i.some(function(e){return e.id===t.id})||i.push(t))}),i.length&&this._getInfoForNewItems(i).then(function(t){var i,n=[];t.forEach(function(t){t.isMain?(delete t.isMain,i=t):n.push(t)}),e._loadItems(i,n)}).catch(function(t){"ajax aborted"!==t&&console.warn("UrlProvider get item info rejection: ",t)})}},{key:"_loadItems",value:function(t,e){var i=this;t?this._loadImage(t).then(function(n){i.options.onItemLoaded&&"function"==typeof i.options.onItemLoaded&&i.options.onItemLoaded(t),i._loadItems(null,e)}):e.forEach(function(t){i._loadImage(t).then(function(e){i.options.onItemLoaded&&"function"==typeof i.options.onItemLoaded&&i.options.onItemLoaded(t)})})}},{key:"_loadImage",value:function(t){var e=this;if("html"==t.type)return $.extend(t,{status:this.STATUSES.loaded}),Promise.resolve();var i=new Image;return t.status=this.STATUSES.loading,new Promise(function(n,s){i.onload=function(){$.extend(t,{status:e.STATUSES.loaded,url:t.urlLarge}),n()},i.onerror=function(){t.status=e.STATUSES.error,s()},i.src=t.urlLarge})}},{key:"_getInfoForNewItems",value:function(t){var e,i=this,n=[];return t.forEach(function(t){t.isMain?e=t.id:n.push(t.id)}),e||(e=n.shift()),new Promise(function(s,o){i._currentRequest&&"pending"===i._currentRequest.state()&&i._currentRequest.abort("ajax aborted"),i._currentRequest=$.ajax({method:"GET",url:""+i.options.url+e+"/",data:{layout:0,photo_ids:n},success:function(e){var n=$("<div></div>");n.html(e),t.forEach(function(t){var e=n.find('[data-id="'+t.id+'"]');e.length||(e=n.find('[data-hash="'+t.id+'"]')),$.extend(t,{status:i.STATUSES.fetched,html:e.length?e[0].outerHTML:"",title:e.length?e.find(".msnt-gallery_title").text():"",type:e.length?e.data("type"):"img",urlLarge:e.length?e.find(".msnt-gallery_img").data("src"):t.url})}),i.options.onItemData&&"function"==typeof i.options.onItemData&&i.options.onItemData(t),s(t)},error:function(t,e,i){o(e)}})})}}]),t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transition=void 0;var n,s=i(75),o=(n=s)&&n.__esModule?n:{default:n};e.Transition=o.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var s=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend({transitionThreshold:100},e),this.animated=!1,this.isDragging=!1,this.isTouch=!!("ontouchstart"in window),this.$body=$(document.body),this.$window=$("window"),this.$wrapper=$(this.options.wrapperSelector,this.options.context),!this.options.onTransitionEnd||"function"!=typeof this.options.onTransitionEnd)throw new Error("onTransitionEnd is not provided or not a function");this._init()}return n(t,[{key:"_init",value:function(){this.$body.on("touchstart mousedown",this.options.dragElSelector,this._handleDndStart.bind(this)),this.$body.on("touchmove mousemove",this._handleDndMove.bind(this)),this.$body.on("touchend mouseup",this._handleDndEnd.bind(this))}},{key:"_handleDndStart",value:function(t){this.animated||this.$wrapper.hasClass("msnt-gallery--current")&&(this.$itemsWrapper=$(this.options.itemsWrapperSelector),this.$wrapper.trigger("msnt-gallery:userinteraction",["dnd","start"]),this.isDragging=!0,window.preventScrollFlag=!0,this._dragStartPos=this.isTouch?t.originalEvent.touches[0].pageX:t.pageX,this._dragEndPos=this._dragStartPos)}},{key:"_handleDndMove",value:function(t){if(this.isDragging){this._dragEndPos=this.isTouch?t.originalEvent.touches[0].pageX:t.pageX;var e=this._calculateOffset();this.$itemsWrapper.css("transform","translate3d("+e+"px, 0, 0)")}}},{key:"_handleDndEnd",value:function(t){var e=this;if(this.isDragging){this.$wrapper.trigger("msnt-gallery:userinteraction",["dnd","end"]),this.isDragging=!1,window.preventScrollFlag=!1;var i,n=this._calculateOffset(),s=n<0?"next":"prev";this.animated=!0,i=Math.abs(n)<this.options.transitionThreshold?"Revert":n<0?"Left":"Right",this.$itemsWrapper.addClass("transform"+i),this.$itemsWrapper.one("transitionend",function(t){"transform"===t.originalEvent.propertyName&&(e.animated=!1,"Revert"!==i&&e.options.onTransitionEnd(s),e.$itemsWrapper.css("transform","translate3d(0px, 0px, 0px)").removeClass("transformLeft transformRight transformRevert"))})}}},{key:"_calculateOffset",value:function(){if(this.options.navigationProvider.atTheStart&&this.options.navigationProvider.atTheEnd)return 0;var t=this._dragEndPos-this._dragStartPos;if(this.options.navigationProvider.atTheStart){if(t<0)return t;t=t/this.$wrapper.width()*this.options.transitionThreshold-1}else if(this.options.navigationProvider.atTheEnd){if(t>0)return t;t=t/this.$wrapper.width()*this.options.transitionThreshold-1}return t}}]),t}();e.default=s},,,,function(t,e,i){var n,s,o;
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */s=[i(0)],void 0===(o="function"==typeof(n=function(t){var e,i,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(t.event.fixHooks)for(var a=n.length;a;)t.event.fixHooks[n[--a]]=t.event.mouseHooks;var r=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=s.length;e;)this.addEventListener(s[--e],l,!1);else this.onmousewheel=l;t.data(this,"mousewheel-line-height",r.getLineHeight(this)),t.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],l,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(n){var s=n||window.event,a=o.call(arguments,1),l=0,u=0,h=0,f=0,p=0,m=0;if((n=t.event.fix(s)).type="mousewheel","detail"in s&&(h=-1*s.detail),"wheelDelta"in s&&(h=s.wheelDelta),"wheelDeltaY"in s&&(h=s.wheelDeltaY),"wheelDeltaX"in s&&(u=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(u=-1*h,h=0),l=0===h?u:h,"deltaY"in s&&(h=-1*s.deltaY,l=h),"deltaX"in s&&(u=s.deltaX,0===h&&(l=-1*u)),0!==h||0!==u){if(1===s.deltaMode){var g=t.data(this,"mousewheel-line-height");l*=g,h*=g,u*=g}else if(2===s.deltaMode){var v=t.data(this,"mousewheel-page-height");l*=v,h*=v,u*=v}if(f=Math.max(Math.abs(h),Math.abs(u)),(!i||f<i)&&(i=f,d(s,f)&&(i/=40)),d(s,f)&&(l/=40,u/=40,h/=40),l=Math[l>=1?"floor":"ceil"](l/i),u=Math[u>=1?"floor":"ceil"](u/i),h=Math[h>=1?"floor":"ceil"](h/i),r.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=n.clientX-y.left,m=n.clientY-y.top}return n.deltaX=u,n.deltaY=h,n.deltaFactor=i,n.offsetX=p,n.offsetY=m,n.deltaMode=0,a.unshift(n,l,u,h),e&&clearTimeout(e),e=setTimeout(c,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function c(){i=null}function d(t,e){return r.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})})?n.apply(e,s):n)||(t.exports=o)},,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={popupPhotoGallaryEntityChanged:function(t,e){if("gtmDataLayer"in window&&t){var i={event:"popupPhotoGallaryEntityChanged",photoId:t};e&&(i.photoUrl=e),gtmDataLayer.push(i)}}};e.default=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(1),s=c(i(82)),o=c(i(48)),a=c(i(154)),r=c(i(50)),l=c(i(23));function c(t){return t&&t.__esModule?t:{default:t}}i(49),n.currentPage.pageInit=function(t,e,i){var c,d=(0,n.$)(window),u=(0,n.$)(".msnt-flexgrid_wrapper");new r.default({selector:".ms-share_inline",data:msConfigVars.shares,onAfterShare:n.fn.afterShare.bind(n.fn)}),(0,o.default)(),(0,n.$)(".ms-filter").msFilter(),c=new a.default({wrapperSelector:".msnt-flexgrid",itemsWrapper:".msnt-flexgrid_wrapper",itemSelector:".msnt-flexgrid_item",stickyElementSelectors:".ms-main-logo",gallerySelector:".msnt-gallery",galleryItemsSelector:".msnt-gallery_items-wrapper",galleryDragElSelector:".msnt-gallery_img-wrapper",url:n.fn.getPhotoDetailsURL()});var h=!1;d.on("ms-filter-apply",function(t){c.hide()}).on("ms-filter-new-content",function(e,i){if(i&&i.status){var s=(0,n.$)(i.html).find(".msnt-flexgrid_wrapper");u.find(".ms-pager").remove(),u.find(".ms-no-results").remove(),u.find(".msnt-flexgrid_item").remove(),u.prepend(s.children()),d.trigger("ms-filter-new-content-updated",[t])}}).on("msnt-gallery:item-info-updated",function(t,e,i){n.fn.banners(e),l.default.init({selector:e,url:msConfigVars.viewsServiceStatUrl,minCount:1}),s.default.popupPhotoGallaryEntityChanged(i.id,i.detailUrl),new r.default({selector:".ms-share_inline",data:msConfigVars.shares,onAfterShare:n.fn.afterShare.bind(n.fn),styleClass:"ms-share-box-inline-transparent"})}).on("msnt-gallery:hide",function(){h=!1,"gtmDataLayer"in window&&gtmDataLayer.push({entityType:"photo",pageType:"browse"})}).on("msnt-gallery:show",function(){h=!0}).on("msnt-gallery:current-item-changed",function(t,e,i){l.default.init({selector:e,url:msConfigVars.viewsServiceStatUrl,minCount:1}),"gtmDataLayer"in window&&gtmDataLayer.push({entityType:"photo",pageType:"detail"}),(0,n.hitPageView)(i.detailUrl,i.title),i.html&&s.default.popupPhotoGallaryEntityChanged(i.id,i.detailUrl),i.html&&!h&&(n.fn.banners(e),new r.default({selector:".ms-share_inline",data:msConfigVars.shares,onAfterShare:n.fn.afterShare.bind(n.fn),styleClass:"ms-share-box-inline-transparent"}))}).on("msnt-gallery:gallery-position-updated",function(t,e){var i=e.data("image-data");i&&i.html&&(n.fn.banners(e),new r.default({selector:".ms-share_inline",data:msConfigVars.shares,onAfterShare:n.fn.afterShare.bind(n.fn),styleClass:"ms-share-box-inline-transparent"}))})},n.currentPage.pageLoadMore=function(t,e){return(0,n.$)("#msnt-flexgrid-sizer_first").before(t.find(".msnt-flexgrid_wrapper").children()),e.remove(),!1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function t(e,i,n){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=i(67),r=(n=a)&&n.__esModule?n:{default:n},l=i(2);var c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,$.extend({itemsWrapper:".msnt-gallery_wrapper",layoutDelay:200,animationSpeed:300,stickyElementSelectors:null,navigationProvider:"MosaicNavigation"},t)));if(i.$itemsWrapper=i.$wrapper.find(i.options.itemsWrapper),i.$stickyElements=$(i.options.stickyElementSelectors),i.debug&&!i.$itemsWrapper.length)throw new Error('Cannot find items wrapper with provided selector "'+i.options.itemsWrapper+'"');return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),s(e,[{key:"toggleFullscreen",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toggleFullscreen",this).call(this),this.updateLayout()}},{key:"updateLayout",value:function(){var t=this;if(!this.animated){this.$itemsWrapper.width(this.$wrapper.width());var e=this.elements.$gallery.detach(),i=this.navigationProvider._getLastItem();if(e.insertAfter(i),this.hidden)e.show();else{var n=e.find(".msnt-gallery-item--current");n.find(".ms-ap").empty().removeAttr("data-ready"),this.$window.trigger("msnt-gallery:gallery-position-updated",[n])}var s=e.height(),o=e.offset().top,a=0,r=-1===["static","relative"].indexOf(e.css("position")),l=this.$window.height()/2;r&&(o=i.offset().top+i.outerHeight(),o-=l),!this.fullscreen&&window.innerWidth>window.innerHeight&&(this.$stickyElements.each(function(t,e){var i=$(e);a+=i.outerHeight()}),a/=2),this.hidden&&e.hide(),this._addResizer(),this.$scrollingElement.animate({scrollTop:o-a-l+s/2+1},this.hidden?this.options.animationSpeed:0,function(e){t._removeResizer()}),this._alignPointer(),this.$itemsWrapper.width(this.$wrapper.width())}}},{key:"_addMainWrapper",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_addMainWrapper",this).call(this),this.elements.$gallery.addClass("msnt-gallery-mosaic")}},{key:"_processItem",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_processItem",this).call(this,t),this.updateLayout()}},{key:"_hide",value:function(){var t=this;this.$window.off("resize"),this.$itemsWrapper.width("auto"),this._addResizer(!0),this.elements.$gallery.stop().slideUp(this.options.animationSpeed,function(e){t._removeResizer(!0),t.hidden=!0})}},{key:"_beforeShow",value:function(){if(this.animated)return!1}},{key:"_beforeHide",value:function(){if(this.animated)return!1}},{key:"_show",value:function(){var t=this;this.$window.on("resize",(0,l.debounce)(this.options.layoutDelay,this.updateLayout.bind(this))),this._addResizer(!0),this.elements.$gallery.stop().slideDown(this.options.animationSpeed,function(e){t._removeResizer(!0),t.hidden=!1}),this._alignPointer()}},{key:"_initMarkup",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initMarkup",this).call(this);var t=$('<span class="msnt-gallery-mosaic_pointer"></span>');this.elements.$gallery.prepend(t),this.elements.$sizerFirst=this.elements.$gallery.find("#msnt-flexgrid-sizer_first"),this.elements.$sizerLast=this.elements.$gallery.find("#msnt-flexgrid-sizer_last"),this.elements.$pointer=t}},{key:"_alignPointer",value:function(){var t=this.elements.$pointer,e=this.elements.$gallery[0].getBoundingClientRect(),i=this.$curItem[0].getBoundingClientRect();t.css("left",i.left-e.left+i.width/2)}}]),e}();e.default=c}]);